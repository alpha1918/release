__require=function e(t,n,r){function i(a,c){if(!n[a]){if(!t[a]){var u=a.split("/");if(u=u[u.length-1],!t[u]){var s="function"==typeof __require&&__require;if(!c&&s)return s(u,!0);if(o)return o(u,!0);throw new Error("Cannot find module '"+a+"'")}}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return i(t[a][1][e]||e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<r.length;a++)i(r[a]);return i}({AGAudio:[function(e,t,n){"use strict";cc._RF.push(t,"f5a5a9eRBVH5qDbsLOoW8um","AGAudio");var r=cc.Class({ctor:function(){this.defaultVolume=.3,this.musicVolume=this.defaultVolume,this.effectVolume=this.defaultVolume},playMusic:function(e,t){return this.musicId=cc.audioEngine.play(e,t,this.musicVolume),this.musicId},playEffect:function(e){return this.effectId=cc.audioEngine.play(e,!1,this.effectVolume),this.effectId},setMusicVolume:function(e){this.musicVolume=e,null!=this.musicId&&cc.audioEngine.setVolume(this.musicId,e)},setEffectsVolume:function(e){this.effectVolume=e,null!=this.effectId&&cc.audioEngine.setVolume(this.effectId,e)},stopMusic:function(){null!=this.musicId&&cc.audioEngine.stop(this.musicId),this.musicId=null}});t.exports=r,cc._RF.pop()},{}],AGSlider:[function(e,t,n){"use strict";cc._RF.push(t,"aea9ec1KG1BQpYn9Jg9HXnb","AGSlider"),cc.Class({extends:cc.Component,properties:{track:{default:null,type:cc.Node},offset:{default:.2}},onLoad:function(){this.node.on("slide",this.onSlide,this),this.slider=this.getComponent(cc.Slider),this.trackWidth=this.track.width,this.offsetRate=.2,this.onSlide()},onSlide:function(){this.progress!=this.slider.progress&&(this.progress=this.slider.progress,this.track.width=this.trackWidth*(this.progress*(1-this.offsetRate)+this.offsetRate))}}),cc._RF.pop()},{}],AchievementChangeCmd:[function(e,t,n){"use strict";cc._RF.push(t,"14a15i4qr5MBLJTqtLbq1Wk","AchievementChangeCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(e){for(var t=e.changeList,n=0;n<t.length;++n){var r=t[n],i=game.controler.getPlayer(r.ownerId);console.log(r),game.achievementMgr.setAchievementOwner(r.type,r.subType,i)}}}],[{key:"unitTest",value:function(e){var t={msgType:NetMsgType.S2CAchievementChange,changeList:e};return(new cmd.AchievementChangeCmd).execute(t)}}]),t}();window.cmd=window.cmd||{},window.cmd.AchievementChangeCmd=i,cc._RF.pop()},{}],AchievementManager:[function(e,t,n){"use strict";cc._RF.push(t,"ea516aHecBN4oi1JT/uXhmb","AchievementManager");var r={init:function(){this.type2achivement={},this.type2achivement[AchievementType.RegionalMonopoly]={},this.type2achivement[AchievementType.IndustryMonopoly]={}},setAchievementOwner:function(e,t,n){var r=this.getAchievement(e,t);r.owner!==n&&(r.owner&&r.owner.removeAchievement(r),r.owner=n,n&&n.addAchievement(r))},newAchievement:function(e,t){return{type:e,subType:t}},getAchievement:function(e,t){var n=null;switch(e){case AchievementType.IndustryMonopoly:case AchievementType.RegionalMonopoly:var r=this.type2achivement[e];(n=r[t])||(n=r[t]=this.newAchievement(e,t));break;default:(n=this.type2achivement[e])||(n=this.type2achivement[e]=this.newAchievement(e))}return n},getIndustryMonopolyAchiever:function(e){return this.getAchievement(AchievementType.IndustryMonopoly,e).owner},hasRentBonus:function(e){return!(e!==TileType.Red&&e!==TileType.Blue||!this.getIndustryMonopolyAchiever(e))},hasBuyCardDiscount:function(e){return this.getIndustryMonopolyAchiever(TileType.Yellow)===e||this.getIndustryMonopolyAchiever(TileType.Pink)===e}};game.achievementMgr=r,game.achievementMgr.init(),cc._RF.pop()},{}],AchievementTotalView:[function(e,t,n){"use strict";cc._RF.push(t,"4c7a6HVuz5B1qXD2ot6JnlH","AchievementTotalView"),cc.Class({extends:cc.Component,onLoad:function(){this.node.setPosition(cc.visibleRect.center),this.addClickListener("btnClose",this.hide),this.node.setPosition(0,0),this.hide()},init:function(){this.initSpeculator(),this.initCollectivize(),this.initRegion(),this.initIndustry()},getPlayer:function(e){if(!game.controler)return null;var t=game.controler.players;return t?t[e]:null},show:function(){this.node.active=!0,this.init()},hide:function(){this.node.active=!1},initSpeculator:function(){for(var e=this.getNodeByName("speculator"),t=game.achievementMgr.getAchievement(AchievementType.Speculator),n=0;n<2;++n){var r=this.getPlayer(n),i=e.getNodeByName("item"+n);r?(i.active=!0,i.getSprite("imgHead").spriteFrame=game.resMgr.getHeadSpriteFrame(r.id),i.setLabel("lbTips",game.i18n.av_speculator_item_tips.format(r.usedCardCount)),i.getNodeByName("imgCup").active=t.owner===r):i.active=!1}},initCollectivize:function(){for(var e=game.achievementMgr.getAchievement(AchievementType.Collectivize),t=this.getNodeByName("collectivize"),n=0;n<2;++n){var r=this.getPlayer(n),i=t.getNodeByName("item"+n);if(r){i.active=!0,i.getSprite("imgHead").spriteFrame=game.resMgr.getHeadSpriteFrame(r.id),i.getNodeByName("imgCup").active=e.owner===r;for(var o=i.getNodeByName("tiles"),a=r.getTileTypes(),c=0;c<8;c++){var u=a[c],s=o.getNodeByName("imgTile"+c);u>0?(s.active=!0,s.color=Type2Color[u]):s.active=!1}}else i.active=!1}},initRegion:function(){for(var e=this.getNodeByName("region"),t=0;t<4;++t){var n=e.getNodeByName("item"+t),r=game.achievementMgr.getAchievement(AchievementType.RegionalMonopoly,t).owner;r?(n.getNodeByName("imgHead").active=!0,n.getSprite("imgHead").spriteFrame=game.resMgr.getHeadSpriteFrame(r.id),n.getNodeByName("imgCup").active=!0,n.setLabel("lbTips",game.i18n.av_region_item_tips.format(r.getRegionTileCount(t)))):(n.getNodeByName("imgHead").active=!1,n.getNodeByName("imgCup").active=!1,n.setLabel("lbTips","\u65e0"))}},initIndustry:function(){for(var e=this.getNodeByName("industry"),t=1;t<=constants.TileTypeCount;++t){var n=e.getNodeByName("item"+t),r=game.achievementMgr.getAchievement(AchievementType.IndustryMonopoly,t).owner;r?(n.getNodeByName("imgCup").active=!0,n.getNodeByName("imgHead").active=!0,n.getSprite("imgHead").spriteFrame=game.resMgr.getHeadSpriteFrame(r.id)):(n.getNodeByName("imgCup").active=!1,n.getNodeByName("imgHead").active=!1)}}}),cc._RF.pop()},{}],AchievementView:[function(e,t,n){"use strict";cc._RF.push(t,"007f2wVV1BCVJhzs2zZ7Cfi","AchievementView"),cc.Class({extends:cc.Component,onLoad:function(){this.itemTemplate=this.getNodeByName("item"),this.itemTemplate.addOutline("lbTitle",cc.Color.BLACK,2),this.itemTemplate.active=!1,this.items=[this.itemTemplate]},newItem:function(){var e=cc.instantiate(this.itemTemplate);return e.addOutline("lbTitle",cc.Color.BLACK,2),e.parent=this.node,e},udpateView:function(e){for(var t={},n=0;n<e.length;n++){var r=e[n],i=t[r.type];i||(i=0),t[r.type]=i+1}var o=0;for(var a in t){var c=this.items[o];c||(c=this.items[o]=this.newItem());var u=t[a];c.active=!0,c.getLabel("lbTitle").string=this.getAchievementText(a,u),++o}for(;o<this.items.length;o++){this.items[o].active=!1}},getAchievementText:function(e,t){return game.i18n.achivement_names[e]+"x"+t}}),cc._RF.pop()},{}],Achievement:[function(e,t,n){"use strict";cc._RF.push(t,"9f7befTIUVFxaa6d7Ka0UHZ","Achievement");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.owner=null,this.type=t,this.subType=n}return r(e,[{key:"updateOwner",value:function(e){var t=InfluenceHandler.getInstance();this.owner&&this.owner.removeAchievement(this);var n=e?e.id:null;e&&(e.addAchievement(this),n=e.id),this.owner=e,t.changeAchievementOwner(this.type,this.subType,n)}},{key:"checkPlayer",value:function(e){}},{key:"checkTile",value:function(e,t){}}]),e}();window.ServerAchievement=i,cc._RF.pop()},{}],ActionCard:[function(e,t,n){"use strict";cc._RF.push(t,"3b54eUdxqlJAafOcV0kqRu4","ActionCard");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,CardType.Action));return e.name="\u884c\u52a8\u5361",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,luckyCard.BaseCard),r(t,[{key:"toString",value:function(){return"\u884c\u52a8\u5361\u63cf\u8ff0"}}]),t}();luckyCard.ActionCard=i,cc._RF.pop()},{}],ActionRollResultCmd:[function(e,t,n){"use strict";cc._RF.push(t,"bfe5djX2h9BBIMBWR4hlQvu","ActionRollResultCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=game.controler.getPlayer(t.playerId),r=game.map.getTile(t.tileIdx),t.luckCoin>0&&n.changeCoin(t.luckCoin),e.next=5,game.diceView.showResult(t.dice);case 5:if(n.getStandTile()===r){e.next=8;break}return e.next=8,game.map.movePlayerTo(n,r.idx);case 8:if(n.enterTile(r),r.isOrigin){e.next=12;break}return e.next=12,game.map.handleTileBalance(r);case 12:game.diceView.hide();case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"unitTest",value:function(e,t,n){var r={type:RollType.Action,playerId:e,dice:n,tileIdx:t};return(new cmd.RollResultCmd).execute(r)}}]),t}();window.cmd=window.cmd||{},window.cmd.ActionRollResultCmd=i,cc._RF.pop()},{}],ActionRollTurnCmd:[function(e,t,n){"use strict";cc._RF.push(t,"f75b9GRttBOkbwVNd0agg/4","ActionRollTurnCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(game.controler.getPlayer(t.playerId).updateState(PlayerState.Roll,CDTime.ActionRoll),game.controler.isHero(t.playerId)){e.next=4;break}return e.abrupt("return");case 4:if(!this.gmTest()){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,game.actionRollView.show(CDTime.ActionRoll);case 8:game.netHandler.roll(RollType.Action),game.diceView.show();case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"gmTest",value:function(){if(gm.autoAcitonRoll)return game.diceView.show(),game.netHandler.roll(RollType.Action),!0}}],[{key:"unitTest",value:function(e){game.controler.setHero(e);var t={type:RollType.Action,playerId:e};return(new cmd.RollTurnCmd).execute(t)}}]),t}();window.cmd=window.cmd||{},window.cmd.ActionRollTurnCmd=i,cc._RF.pop()},{}],ActionRollView:[function(e,t,n){"use strict";cc._RF.push(t,"bbb4acgFv5BPLilJJQ9BR3f","ActionRollView"),cc.Class({extends:cc.Component,onLoad:function(){this.cd=this.getNodeByName("cd").getComponent("CountdownHandler"),this.addClickListener("btnDice",this.onBtnDice,this),this.hide()},show:function(e){var t=this;return this.node.active=!0,this.cd.startCount(e,this.onBtnDice.bind(this)),new Promise(function(e){t.onRollCallback=e})},onBtnDice:function(){this.hide(),this.onRollCallback&&this.onRollCallback(),this.onRollCallback=null},hide:function(){this.node.active=!1}}),cc._RF.pop()},{}],BaseCard:[function(e,t,n){"use strict";cc._RF.push(t,"789ddz6NPVFKqX/wdd4G3Ib","BaseCard");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}var o=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.type=t}return r(e,[{key:"displayUse",value:function(){var e=i(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,game.cardMgr.showUseCardDisplay(this.type);case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"sendUseData",value:function(e){game.netHandler.useCard(!0,this.type,e)}},{key:"sendPass",value:function(){game.netHandler.useCard(!1)}},{key:"onCancel",value:function(e){game.tileSelector.hide(),game.cardSelectView.show(e)}},{key:"onTimeout",value:function(){game.tileSelector.hide(),this.sendPass()}},{key:"showTileCardView",value:function(e,t){game.tileCardUseView.show(e,t,this.onCancel.bind(this),this.onTimeout.bind(this))}},{key:"hideTileCardView",value:function(){game.tileCardUseView.hide()}},{key:"use",value:function(){this.sendUseData()}},{key:"use4tile",value:function(){var e=i(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.showTileCardView(t,r),e.next=3,game.tileSelector.getSelectTile(n);case 3:(i=e.sent)&&(this.hideTileCardView(),this.sendUseData(i.idx));case 5:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"toString",value:function(){}}]),e}();luckyCard.BaseCard=o,cc._RF.pop()},{}],BaseCommand:[function(e,t,n){"use strict";cc._RF.push(t,"a7c2f5QD3FLHIxB3JNhg+GP","BaseCommand");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return r(e,[{key:"execute",value:function(e){}},{key:"setHero",value:function(e){game.controler.setHero(e)}},{key:"getPlayer",value:function(e){return game.controler.getPlayer(e)}},{key:"getTile",value:function(e){return game.map.getTile(e)}}]),e}();window.cmd=window.cmd||{},window.cmd.BaseCommand=i,cc._RF.pop()},{}],BaseModalDlgComponent:[function(e,t,n){"use strict";cc._RF.push(t,"ee9c0uFWk9EFZjmDkMrbhlo","BaseModalDlgComponent");var r=cc.Class({extends:cc.Component,onLoad:function(){this.node.modalComponent=this,this.addBlock(),this.addBlackTray(),this.closeData=null,this.isShowPlayEffect=!0},addBlock:function(){var e=new cc.Node;e.setContentSize(cc.winSize),this.node.addChild(e,-1),e.addComponent(cc.BlockInputEvents),e.setAnchorPoint(.5,.5)},setData:function(e){},setCallbackData:function(e){this.closeData=e},setCloseCallback:function(e){this.closeCallback=e},addBlackTray:function(){var e=this.node.addComponent(cc.Graphics),t=this.node.getContentSize();e.rect(t.width/2-cc.winSize.width/2,t.height/2-cc.winSize.height/2,cc.winSize.width,cc.winSize.height),e.fillColor=cc.color(0,0,0,153),e.fill(),e.stroke(),this.blackTray=e},start:function(){},show:function(){},hide:function(){e("ModalManager").getInstance().hide(this.node),null!=this.closeCallback&&this.closeCallback(this.closeData)},top:function(e){this.blackTray.enabled=e}});t.exports=r,cc._RF.pop()},{ModalManager:"ModalManager"}],BlockCard:[function(e,t,n){"use strict";cc._RF.push(t,"1f14aPsw9NOWL4Jsp5G53xa","BlockCard");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var o=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,CardType.Block));return e.name="\u884c\u8def\u969c\u5361",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,luckyCard.BaseCard),r(t,[{key:"displayUse",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"displayUse",this).call(this);case 2:r.addBlock();case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"use",value:function(e){return this.use4tile("\u8bf7\u5728\u4efb\u610f\u4f4d\u7f6e\u8bbe\u7f6e\u8def\u969c",t.tileFilter,e)}},{key:"toString",value:function(){return"\u8def\u969c\u5361\u63cf\u8ff0"}}],[{key:"tileFilter",value:function(e){return!e.hasBlock}}]),t}();luckyCard.BlockCard=o,cc._RF.pop()},{}],BuildConfirmView:[function(e,t,n){"use strict";cc._RF.push(t,"2d732OMVmNF6bRFzBWJtZ2W","BuildConfirmView"),cc.Class({extends:cc.Component,onLoad:function(){this.addClickListener("btnOK",this.onBtnOK,this),this.addClickListener("btnCancel",this.onBtnCancel,this),this.cd=this.getNodeByName("cd").getComponent("CountdownHandler"),this.hide()},show:function(e,t,n){var r=this;return this.node.active=!0,this.getLabel("lbTips").string=game.i18n.build_confirm_tips.format(t),this.getNodeByName("imgTile").color=Type2Color[e.type],this.getLabel("lbCount").string="x"+game.map.getTiles4Type(e.type).length,n>0?this.setLabel("lbDiscount",game.i18n.build_confirm_discount_tips.format(n)):this.setLabel("lbDiscount",""),this.cd.startCount(CDTime.BuildConfirm,this.onBtnCancel.bind(this)),new Promise(function(e){r.callback=e})},hide:function(){this.node.active=!1},onBtnOK:function(){this.callback&&this.callback(!0),this.callback=null,this.hide()},onBtnCancel:function(){this.callback&&this.callback(!1),this.callback=null,this.hide()}}),cc._RF.pop()},{}],BuildResultCmd:[function(e,t,n){"use strict";cc._RF.push(t,"f7f32QhXk5PmoRnoLsFyZg1","BuildResultCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=game.controler.getPlayer(t.playerId)).updateState(PlayerState.None),t.take){e.next=4;break}return e.abrupt("return");case 4:return r=n.getStandTile(),e.next=7,n.build(r,t.cost);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"unitTest",value:function(e,t){var n={msgType:NetMsgType.S2CActionResult,playerId:e,type:ActionType.Build,take:t};game.netHandler.onSequenceMsg(n)}}]),t}();window.cmd=window.cmd||{},window.cmd.BuildResultCmd=i,cc._RF.pop()},{}],BuildTurnCmd:[function(e,t,n){"use strict";cc._RF.push(t,"9a523GrPGFAhYH6gQrUYVBm","BuildTurnCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){var n,r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=game.controler.getPlayer(t.playerId)).updateState(PlayerState.Build,CDTime.BuildConfirm),n.isHero()){e.next=4;break}return e.abrupt("return");case 4:if(!(r=n.getStandTile()).isOrigin){e.next=10;break}return e.next=8,game.unbuildableTipsView.show(r);case 8:return game.netHandler.build(!1),e.abrupt("return");case 10:if(i=t.discount||0,o=r.buildCost-i,!this.gmTest(o)){e.next=14;break}return e.abrupt("return");case 14:if(r.owner||!(game.hero.coin>=o)){e.next=22;break}return e.next=17,game.buildConfirmView.show(r,o,t.discount);case 17:return a=e.sent,game.netHandler.build(a),e.abrupt("return",Promise.resolve(a));case 22:return e.next=24,game.unbuildableTipsView.show(r,o);case 24:return game.netHandler.build(!1),e.abrupt("return",Promise.resolve(!1));case 26:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"gmTest",value:function(e){}}],[{key:"unitTest",value:function(e,t){var n={msgType:NetMsgType.S2CActionTurn,playerId:e,type:ActionType.Build,discount:t};game.netHandler.onSequenceMsg(n)}}]),t}();window.cmd=window.cmd||{},window.cmd.BuildTurnCmd=i,cc._RF.pop()},{}],BuyCardResultCmd:[function(e,t,n){"use strict";cc._RF.push(t,"f2110CmqyRGJ6SNOmMGxZKe","BuyCardResultCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=game.controler.getPlayer(t.playerId)).updateState(PlayerState.None),t.take){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,n.buyCard(t.cardType,t.cost);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"unitTest",value:function(e,t,n){var r={msgType:NetMsgType.S2CActionResult,playerId:e,take:t,type:ActionType.BuyCard,cardType:n};game.netHandler.onSequenceMsg(r)}}]),t}();window.cmd=window.cmd||{},window.cmd.BuyCardResultCmd=i,cc._RF.pop()},{}],BuyCardTurnCmd:[function(e,t,n){"use strict";cc._RF.push(t,"ab19blggL1MPJei9QUE+huo","BuyCardTurnCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=game.controler.getPlayer(t.playerId)).updateState(PlayerState.Card,5),n.isHero()){e.next=4;break}return e.abrupt("return");case 4:if(t.hasCard){e.next=8;break}return e.next=7,game.tipsView.show(game.i18n.buy_card_void);case 7:return e.abrupt("return");case 8:if(!this.gmTest(t.cost)){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,game.cardInquiryView.show(CardInquireType.Buy,t.cost);case 12:r=e.sent,game.netHandler.buyCard(r.take);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"gmTest",value:function(e){return gm.autoBuyCard?(game.netHandler.buyCard(game.hero.coin>=e),!0):!!gm.passBuyCard&&(game.netHandler.buyCard(!1),!0)}}],[{key:"unitTest",value:function(e,t){var n={msgType:NetMsgType.S2CActionTurn,playerId:e,type:ActionType.BuyCard};game.netHandler.onSequenceMsg(n)}}]),t}();window.cmd=window.cmd||{},window.cmd.BuyCardTurnCmd=i,cc._RF.pop()},{}],CardInquiryView:[function(e,t,n){"use strict";cc._RF.push(t,"c2e18s+ezxH6LL22FJ0M5Vb","CardInquiryView"),window.CardInquireType={Buy:0,Use:1},cc.Class({extends:cc.Component,onLoad:function(){this.addClickListener("btnOK",this.onBtnOK,this),this.addClickListener("btnCancel",this.onBtnCancel,this),this.cd=this.getNodeByName("cd").getComponent("CountdownHandler"),this.btnOK=this.getButton("btnOK"),this.btnCancel=this.getButton("btnCancel"),this.lbTitle=this.getLabel("lbTitle"),this.lbTips=this.getLabel("lbTips"),this.hide()},show:function(e,t){var n=this;return this.node.active=!0,e===CardInquireType.Buy?this.setupBuyCardView(t):this.setupUseCardView(),this.cd.startCount(CDTime.CardInquire,this.onBtnCancel.bind(this)),new Promise(function(e){n.onSelectCallback=e})},setupBuyCardView:function(e){var t=game.hero.coin>=e;this.lbTitle.string=game.i18n.buy_card_title.format(e),t?(this.lbTips.string="",this.btnOK.interactable=!0):(this.lbTips.string=game.i18n.buy_card_tips_insufficient,this.lbTips.node.color=cc.Color.RED,this.btnOK.interactable=!1),this.btnOK.node.getLabel("lbTitle").string=game.i18n.buy_card_button_ok,this.btnCancel.node.getLabel("lbTitle").string=game.i18n.buy_card_button_cancel},setupUseCardView:function(){var e=game.hero.card>0;this.lbTitle.string=game.i18n.use_card_title,e?(this.lbTips.string=game.i18n.use_card_tips.format(game.hero.card),this.lbTips.node.color=cc.Color.WHITE,this.btnOK.interactable=!0):(this.lbTips.string=game.i18n.use_card_tips_insufficient,this.lbTips.node.color=cc.Color.RED,this.btnOK.interactable=!1),this.btnOK.node.getLabel("lbTitle").string=game.i18n.use_card_button_ok,this.btnCancel.node.getLabel("lbTitle").string=game.i18n.use_card_button_cancel},hide:function(){this.node.active=!1},onBtnOK:function(){var e={take:!0,cd:this.cd.getTime()};this.onSelectCallback&&this.onSelectCallback(e),this.onSelectCallback=null,this.hide()},onBtnCancel:function(){var e={take:!1,cd:this.cd.getTime()};this.onSelectCallback&&this.onSelectCallback(e),this.onSelectCallback=null,this.hide()}}),cc._RF.pop()},{}],CardMananger:[function(e,t,n){"use strict";cc._RF.push(t,"a1e63j98npGJpQNWVDDNHSF","CardMananger"),cc.Class({extends:cc.Component,onLoad:function(){game.cardMgr=this,this.cardTemplate=this.getNodeByName("card"),this.cardDisplayView=this.getNodeByName("cCardUseDisplay"),this.hideUseCardDisplay(),this.displayCard=this.cardTemplate.getComponent("CardView"),this.type2card={}},getCard:function(e){var t=this.type2card[e];return t||(t=this.createCard(e)),t},hideUseCardDisplay:function(){this.cardDisplayView.active=!1},showUseCardDisplay:function(e){var t=this;return new Promise(function(n){t.cardDisplayView.setPosition(0,0),t.cardDisplayView.active=!0;var r=t.getCard(e);t.cardDisplayView.getLabel("lbUseTitle").string="\u4f7f\u7528"+r.name,t.displayCard.init(r.name,r,0),t.scheduleOnce(function(){n(),t.hideUseCardDisplay()},1)})},showPlayerGainCard:function(e,t){var n=this;return new Promise(function(r){var i=n.cardDisplayView;i.active=!0,i.setPosition(0,0);var o=n.getCard(t),a=i.getLabel("lbUseTitle");a.string="\u83b7\u5f97"+o.name,n.displayCard.init(o.name,o,0);var c=[];c.push(cc.delayTime(1)),c.push(cc.callFunc(function(){a.node.active=!1}));var u=n.node.convertToNodeSpaceAR(e.getCardPosition()),s=cc.spawn(cc.moveTo(.2,u),cc.scaleTo(.2,.2));c.push(s),c.push(cc.delayTime(.1)),c.push(cc.callFunc(function(){a.node.active=!0,i.active=!1,i.scale=1,r()})),i.runAction(cc.sequence(c))})},getCardView:function(e,t){var n=this.getCard(e),r=cc.instantiate(this.cardTemplate).getComponent("CardView");return r.init(n.name,n,t),r},createCard:function(e){var t=null;switch(e){case CardType.Action:t=new luckyCard.ActionCard;break;case CardType.Block:t=new luckyCard.BlockCard;break;case CardType.Cup:t=new luckyCard.CupCard;break;case CardType.House:t=new luckyCard.HouseCard;break;case CardType.Remove:t=new luckyCard.RemoveCard;break;case CardType.CupAndHouse:t=new luckyCard.CupAndHouseCard;break;case CardType.Seize:t=new luckyCard.SeizeCard;break;case CardType.Coin20:t=new luckyCard.CoinCard(e,20);break;case CardType.Coin30:t=new luckyCard.CoinCard(e,30);break;case CardType.Coin50:t=new luckyCard.CoinCard(e,50);break;case CardType.Coin75:t=new luckyCard.CoinCard(e,75);break;case CardType.Coin100:t=new luckyCard.CoinCard(e,100)}return t}}),cc._RF.pop()},{}],CardSelectView:[function(e,t,n){"use strict";cc._RF.push(t,"96a10wzg49DZo0Ry9fk8k+h","CardSelectView"),cc.Class({extends:cc.Component,onLoad:function(){this.btnOK=this.getButton("btnOK"),this.addClickListener("btnOK",this.onBtnOK,this),this.addClickListener("btnCancel",this.onBtnCancel,this),this.cd=this.getNodeByName("cd").getComponent("CountdownHandler"),this.cardContainer=this.getScrollViewContent("svCards"),this.hide()},show:function(e){this.btnOK.interactable=!1,this.node.active=!0,this.showCards(game.hero.cards),this.cd.startCount(e,this.onBtnCancel.bind(this))},showCards:function(e){for(var t in e){var n=parseInt(t),r=e[n];if(r){var i=game.cardMgr.getCardView(n,r);i.type=n,this.cardContainer.addChild(i.node),i.setSelectListener(this.onCardSelected.bind(this))}}},onCardSelected:function(e){this.selectedCard!==e&&(this.selectedCard&&this.selectedCard.setSelected(!1),this.selectedCard=e,this.selectedCard.setSelected(!0),this.btnOK.interactable=!0)},hide:function(){this.node.active=!1,this.clear()},clear:function(){this.cardContainer.removeAllChildren(!0)},onBtnOK:function(){this.hide(),this.useCard(this.selectedCard.type)},onBtnCancel:function(){this.hide(),game.netHandler.useCard(!1)},useCard:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:game.cardMgr.getCard(t).use(this.cd.getTime());case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}),cc._RF.pop()},{}],CardView:[function(e,t,n){"use strict";cc._RF.push(t,"a6d42UISs5CtpumpkUQ1P6M","CardView"),cc.Class({extends:cc.Component,onLoad:function(){this.node.on("click",this.onClick,this)},init:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.getLabel("lbTitle").string=e,this.getLabel("lbDesc").string=t,this.getLabel("lbCount").string=n>0?"x"+n:"",this.setSelected(!1),this.addOutline("lbDesc",cc.color(80,80,80),2)},setSelected:function(e){this.getNodeByName("frame").active=e},setSelectListener:function(e){this.listener=e},onClick:function(){this.listener&&this.listener(this)}}),cc._RF.pop()},{}],CoinCard:[function(e,t,n){"use strict";cc._RF.push(t,"a3bafoOKVJDlagwgIiUui6E","CoinCard");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var o=function(e){function t(e,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.cost=n,r.name="\u91d1\u5e01\u5361",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,luckyCard.BaseCard),r(t,[{key:"displayUse",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"displayUse",this).call(this);case 2:return e.next=4,n.gainCoin(cc.visibleRect.center,this.cost);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"toString",value:function(){return"\u83b7\u5f97"+this.cost+"\u91d1\u5e01"}}]),t}();luckyCard.CoinCard=o,cc._RF.pop()},{}],CollectivizeAchievement:[function(e,t,n){"use strict";cc._RF.push(t,"e0730LegKhGZZYoEku9icKN","CollectivizeAchievement");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ServerAchievement),r(t,[{key:"checkTile",value:function(e,t){e.owner?this.checkBuild(e):this.checkRemoveTile(e,t)}},{key:"checkBuild",value:function(e){var t=e.owner;if(t!==this.owner){var n=e.owner.getTileTypesCount();if(!(n<4)){var r=this.owner;r&&r.getTileTypesCount()>=n||this.updateOwner(t)}}}},{key:"checkRemoveTile",value:function(e,t){var n=this.owner,r=this.getMaxCountAchiever();if(n){var i=n.getTileTypesCount();r&&r!==n&&r.getTileTypesCount()>i?this.updateOwner(r):i<4&&this.updateOwner(null)}}},{key:"getMaxCountAchiever",value:function(){for(var e=ServerPlayerManager.getInstance().players,t=0,n=null,r=0;r<e.length;r++){var i=e[r],o=i.getTileTypesCount();o>=4&&o>t&&(t=o,n=i)}return n}}]),t}();window.CollectivizeAchievement=i,cc._RF.pop()},{}],Command:[function(e,t,n){"use strict";cc._RF.push(t,"97ddfmSN6NCRYrYNXfFfcEw","Command");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return r(e,[{key:"execute",value:function(e){}}]),e}();window.serverCommand=window.serverCommand||{},window.serverCommand.BaseCommand=i,cc._RF.pop()},{}],CountdownHandler:[function(e,t,n){"use strict";cc._RF.push(t,"2c097q9halAdKLUCpSlnwmP","CountdownHandler"),cc.Class({extends:cc.Component,onLoad:function(){},startCount:function(e,t){this.node.active=!0,this.time=e,this.onTimeout=t,this.getLabel("lbTime").string=this.time},hide:function(){this.clear(),this.node.active=!1},clear:function(){this.time=0,this.onTimeout=null},updateTimer:function(){this.getLabel("lbTime").string=Math.ceil(this.time)},getTime:function(){return this.time},timeout:function(){this.time=0,this.updateTimer(),this.onTimeout&&this.onTimeout(),this.clear()},update:function(e){gm.noTimeout||(this.time>0?(this.time-=e,this.updateTimer()):this.timeout())}}),cc._RF.pop()},{}],CupAndHouseCard:[function(e,t,n){"use strict";cc._RF.push(t,"1c8b6Y2LrNN7In5OwY/cRgJ","CupAndHouseCard");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}var a=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,CardType.CupAndHouse));return e.name="\u5956\u676f\u5efa\u7b51\u5361",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,luckyCard.BaseCard),r(t,[{key:"displayUse",value:function(){var e=o(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"displayUse",this).call(this);case 2:return e.next=4,Promise.all([n.gainCup(cc.visibleRect.center),n.build(r)]);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"use",value:function(){var e=o(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.use4tile("\u8bf7\u5728\u4efb\u610f\u7a7a\u5730\u4e0a\u5efa\u9020\u623f\u5c4b",t.tileFilter,n));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"toString",value:function(){return"\u5956\u676f+\u5efa\u7b51\u5361\u63cf\u8ff0"}}],[{key:"tileFilter",value:function(e){return!e.isOrigin&&!e.owner}}]),t}();luckyCard.CupAndHouseCard=a,cc._RF.pop()},{}],CupCard:[function(e,t,n){"use strict";cc._RF.push(t,"8316cOhwApORIfz6JWi2X9M","CupCard");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var o=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,CardType.Cup));return e.name="\u5956\u676f\u5361",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,luckyCard.BaseCard),r(t,[{key:"displayUse",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"displayUse",this).call(this);case 2:return e.next=4,n.gainCup(cc.visibleRect.center);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"toString",value:function(){return"\u5956\u676f\u5361\u63cf\u8ff0"}}]),t}();luckyCard.CupCard=o,cc._RF.pop()},{}],DiceView:[function(e,t,n){"use strict";cc._RF.push(t,"00797sRFf1OQKJtzVlSBg4Y","DiceView"),cc.Class({extends:cc.Component,onLoad:function(){this.hide()},show:function(){return this.node.active=!0,this.startRoll()},hide:function(){this.node.active=!1},startRoll:function(){var e=this.getLabel("lbDiceNum"),t=[];t.push(cc.delayTime(.03)),t.push(cc.callFunc(function(){e.string=utils.randomInt(2,12)})),e.node.runAction(cc.repeatForever(cc.sequence(t))),e.startTime=Date.now();var n=1;this.scheduleOnce(this.stopRoll.bind(this),n)},showResult:function(e){var t=this;return new Promise(function(n){t.result=e,t.callback=n})},stopRoll:function(){if(this.result){var e=this.result[0]+this.result[1],t=this.getLabel("lbDiceNum");t.node.stopAllActions(),t.string=e+"\u70b9\uff01",this.scheduleOnce(this.callback,1),this.callback=null}else this.scheduleOnce(this.showResult.bind(this),.1)}}),cc._RF.pop()},{}],DisplayUtils:[function(e,t,n){"use strict";cc._RF.push(t,"2aed2iDie9NqqKZA0v/KC0b","DisplayUtils");var r=cc.Class({extends:cc.NodePool,init:function(e){this.data=e},get:function(){return this.size()>0?cc.NodePool.prototype.get.call(this):i.createFrameAnimationNode(this.data)}}),i={createFrameAnimationNode:function(e){var t=null;e.prefix?t=this.getSpriteFrames(e.atlas,e.prefix,e.idxStart,e.idxEnd):t=cc.loader.getRes(e.atlas,cc.SpriteAtlas).getSpriteFrames();null!=e.idxFrameStart&&e.idxFrameStart>=0&&e.idxFrameStart<t.length&&(t=t.slice(e.idxFrameStart).concat(t.slice(0,e.idxFrameStart)));var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=t[0];var r=n.addComponent(cc.Animation),i=cc.AnimationClip.createWithSpriteFrames(t,e.fps);if(i.name=e.clipName||"anim",r.addClip(i),e.loop)i.wrapMode=cc.WrapMode.Loop,r.play(i.name);else if(e.once){r.play(i.name);r.on("finished",function e(){n.parent=null,r.off("finished",e)})}return n},addOutline:function(e,t,n){if(e instanceof cc.Label&&(e=e.node),null!=e.getComponent(cc.Label)){var r=e.addComponent(cc.LabelOutline);r.color=t,r.width=n}else console.error("utils.ui.addOutline:is not label component")},getSpriteFrame:function(e,t){if(null==t){var n=new cc.SpriteFrame;return n.setTexture(cc.loader.getRes(e)),n}return cc.js.isString(t)&&(t=cc.loader.getRes(t,cc.SpriteAtlas)),t.getSpriteFrame(e)},createSpriteNode:function(e,t){var n=new cc.Node;return n.addComponent(cc.Sprite).spriteFrame=this.getSpriteFrame(e,t),n},setSpriteFrame:function(e,t,n){var r=e.getComponent(cc.Sprite),i=this.getSpriteFrame(t,n);null!=i?r.spriteFrame=i:console.log('setSpriteFrame:"{0}"--"{1}" no exist!'.format(n,t))},createPrefab:function(e){return cc.instantiate(cc.loader.getRes(e,cc.Prefab))},getSpriteFramesByPath:function(e,t,n,r){for(var i=[],o=n;o<=r;++o){var a=e+t+o+".png",c=new cc.SpriteFrame(cc.url.raw(a));null==c&&console.log("##############frame no exist, name:"+a+",in atlas:"+atlas.name),i.push(c)}return i},getSpriteFrames:function(e,t,n,r){if(cc.js.isString(e)&&(e=cc.loader.getRes(e,cc.SpriteAtlas)),null==t)return e.getSpriteFrames();for(var i=[],o=n;o<=r;++o){var a=t+o,c=e.getSpriteFrame(a);null==c&&console.log("##############frame no exist, name:"+a+",in atlas:"+e.name),i.push(c)}return i},createAnimationNodePool:function(e){var t=new r;return t.init(e),t},scaleClickRegion:function(e,t,n){var r=e.node;e.interactable=!1;var i=cc.instantiate(r);i.setPosition(0,0),i.scale=n||.8,i.opacity=1,i.parent=r;var o=e.zoomScale,a=e.duration;r.trigger=i;var c=function(){r.scaleState=0};i.on(cc.Node.EventType.TOUCH_START,function(){1!=r.scaleState&&r.scale<o&&(r.stopAllActions(),r.scaleState=1,r.runAction(cc.sequence(cc.scaleTo(a,o),cc.callFunc(c))))}),i.on(cc.Node.EventType.TOUCH_END,function(){-1!=r.scaleState&&r.scale>1&&(r.stopAllActions(),r.scaleState=-1,r.runAction(cc.sequence(cc.scaleTo(a,1),cc.callFunc(c)))),null!=t&&t()}),i.on(cc.Node.EventType.TOUCH_CANCEL,function(){-1!=r.scaleState&&r.scale>1&&(r.stopAllActions(),r.scaleState=-1,r.runAction(cc.sequence(cc.scaleTo(a,1),cc.callFunc(c))))})}};t.exports=i,cc._RF.pop()},{}],DrawCardView:[function(e,t,n){"use strict";cc._RF.push(t,"9d636n2HCFFNaB9Rv1R9+PB","DrawCardView"),cc.Class({extends:cc.Component,onLoad:function(){this.node.active=!1,this.cd=this.getNodeByName("cd").getComponent("CountdownHandler"),this.addClickListener("btnDice",this.onBtnDice,this),this.hide()},show:function(e){var t=this;this.node.active=!0;var n=game.hero.usedCardCount;return this.setLabel("lbTips",game.i18n.draw_card_tips.format(n,n)),this.cd.startCount(e,this.onBtnDice.bind(this)),new Promise(function(e){t.onRollCallback=e})},onBtnDice:function(){this.hide(),this.onRollCallback&&this.onRollCallback(),this.onRollCallback=null},hide:function(){this.node.active=!1}}),cc._RF.pop()},{}],EasyCalls:[function(e,t,n){"use strict";cc._RF.push(t,"14ec6jNPr5OiYJkSKH+yiy6","EasyCalls");var r={getComponentByType:function(e,t){return this.getNodeByName(e).getComponent(t)},getNodeByName:function(e){var t=this;if(this instanceof cc.Component&&(t=this.node),!e)return t;var n=function e(t,n){if(!t)return null;for(var r=t.children,i=0;i<r.length;++i){var o=r[i];if(o.name===n)return o;var a=e(o,n);if(null!==a)return a}return null}(t,e);return null===n&&console.log("error,no this node:"+e),n},activeNode:function(e){var t=this.getNodeByName(e);t&&(t.active=!0)},deactiveNode:function(e){var t=this.getNodeByName(e);t&&(t.active=!1)},setNodeColor:function(e,t){var n=this.getNodeByName(e);n&&(n.color=t)},getSkeleton:function(e){return this.getComponentByType(e,sp.Skeleton)},getButton:function(e){return this.getComponentByType(e,cc.Button)},getLabel:function(e){return this.getComponentByType(e,cc.Label)},setLabel:function(e,t){this.getLabel(e).string=t},addOutline:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cc.Color.BLACK,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=this.getNodeByName(e).addComponent(cc.LabelOutline);r.color=t,r.width=n},getRichText:function(e){return this.getComponentByType(e,cc.RichText)},getSprite:function(e){return this.getComponentByType(e,cc.Sprite)},getSpriteFrame:function(e){var t=this.getComponentByType(e,cc.Sprite);return t?t.spriteFrame:null},getAnimation:function(e){return this.getComponentByType(e,cc.Animation)},getEditBox:function(e){return this.getComponentByType(e,cc.EditBox)},getScrollViewContent:function(e){return this.getScrollView(e).content},getScrollView:function(e){return this.getComponentByType(e,cc.ScrollView)},getProgressBar:function(e){return this.getComponentByType(e,cc.ProgressBar)},getWebView:function(e){return this.getComponentByType(e,cc.WebView)},addClickListener:function(e,t,n){this.getNodeByName(e).on("click",t,n||this)},addNodeClickListener:function(e,t,n){e.on("click",t,n||this)},setButtonTitle:function(e,t){cc.js.isString(e)&&null===(e=this.getNodeByName(e))?console.log("#############setButtonTitle:no button:"+e):e.getLabel("Label").string=t}};cc.js.addon(cc.Node.prototype,r),cc.js.addon(cc.Component.prototype,r),cc._RF.pop()},{}],FloatItem:[function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}cc._RF.push(t,"3b0e37shTRNTYsMXXhVpNV4","FloatItem"),cc.Class({extends:cc.Component,onLoad:function(){this.coinTemplate=this.getNodeByName("coin"),this.coinTemplate.setPosition(9999,9999),this.cupTemplate=this.getNodeByName("cup"),this.cupTemplate.setPosition(9999,9999)},getCoin:function(e){var t=cc.instantiate(this.coinTemplate);return t.getLabel("lbCoin").string=e,t.parent=this.node,t},floatItem:function(e,t,n){var r=this;return new Promise(function(i){t=r.node.convertToNodeSpaceAR(t),n=r.node.convertToNodeSpaceAR(n),e.setPosition(t);var o=[];o.push(cc.moveBy(.2,0,100).easing(cc.easeElasticOut(3))),o.push(cc.moveTo(.3,n)),o.push(cc.callFunc(function(){i(),r.recycle(e)})),e.runAction(cc.sequence(o))})},floatCoin:function(){var e=r(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.getCoin(t),e.next=3,this.floatItem(i,n,r);case 3:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),getCup:function(){var e=cc.instantiate(this.cupTemplate);return e.parent=this.node,e},floatCup:function(){var e=r(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getCup(),e.next=3,this.floatItem(r,t,n);case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),recycle:function(e){e.removeFromParent(!0)}}),cc._RF.pop()},{}],FloatTips:[function(e,t,n){"use strict";cc._RF.push(t,"2669bdHrXJNV7XoUW5V6IwH","FloatTips"),cc.Class({extends:cc.Component,onLoad:function(){this.lbTips=this.getLabel("lbTips"),displayUtils.addOutline(this.lbTips,cc.color(29,106,204),2),this.hide(),game.FloatTips=this},show:function(e){this.node.active=!0,this.lbTips.string=e;var t=[];this.lbTips.node.stopAllActions(),this.lbTips.node.y=0,t.push(cc.moveBy(1,0,200)),t.push(cc.delayTime(.5)),t.push(cc.callFunc(this.hide,this)),this.lbTips.node.runAction(cc.sequence(t))},hide:function(){this.node.active=!1}}),cc._RF.pop()},{}],GameController:[function(e,t,n){"use strict";cc._RF.push(t,"1f44dG8mLRLdYHVJ7RyGlnV","GameController"),cc.Class({extends:cc.Component,onLoad:function(){this.initNet(),game.controler=this,this.addClickListener("btnRule",this.onBtnRule,this),this.addClickListener("btnAchievement",this.onBtnAchievement,this),this.addClickListener("btnStart",this.onBtnStart,this),game.singlePlay=!0,this.showAchievementTips(!1)},onBtnStart:function(){this.localGameServer=e("LocalGameServer"),this.localGameServer.init(),this.localGameServer.gameStart(),this.getNodeByName("btnStart").active=!1},showAchievementTips:function(e){this.getNodeByName("cAchievementTips").active=e,this.getNodeByName("btnAchievement").active=!e,this.getNodeByName("btnRule").active=!e},onBtnRule:function(){gm.unitTest?game.test2():gm.show()},onBtnAchievement:function(){gm.unitTest?game.test1():game.achievementTotalView.show()},start:function(){(gm.autoStart&&this.onBtnStart(),gm.unitTest)&&(new cmd.UnitTestCmd).execute()},initNet:function(){e("TestClientNetHandler").init(),game.netHandler.registerSequenceMsgCommand(NetMsgType.S2CGameStart,cmd.GameStartCmd),game.netHandler.registerSequenceMsgCommand(NetMsgType.S2CGameOver,cmd.GameOverCmd),game.netHandler.registerSequenceMsgCommand(NetMsgType.S2CRollTurn,cmd.RollTurnCmd),game.netHandler.registerSequenceMsgCommand(NetMsgType.S2CRollResult,cmd.RollResultCmd),game.netHandler.registerSequenceMsgCommand(NetMsgType.S2CPrebuildTurn,cmd.PrebuildTurnCmd),game.netHandler.registerSequenceMsgCommand(NetMsgType.S2CPrebuildResult,cmd.PrebuildResultCmd),game.netHandler.registerSequenceMsgCommand(NetMsgType.S2CSelectOriginTurn,cmd.SelectOriginTurnCmd),game.netHandler.registerSequenceMsgCommand(NetMsgType.S2CSelectOriginResult,cmd.SelectOriginResultCmd),game.netHandler.registerSequenceMsgCommand(NetMsgType.S2CActionTurn,cmd.RoundActionTurnCmd),game.netHandler.registerSequenceMsgCommand(NetMsgType.S2CActionResult,cmd.RoundActionResultCmd),game.netHandler.registerSequenceMsgCommand(NetMsgType.S2CAchievementChange,cmd.AchievementChangeCmd)},getPlayer:function(e){return this.id2player[e]},getPlayerIdx:function(e){return this.players.indexOf(this.getPlayer(e))},setHero:function(e){game.singlePlay&&(game.hero=this.getPlayer(e))},isHero:function(e){return game.hero.id===e},createAvatar:function(e){return game.resMgr.getAvatar(e).getComponent("PlayerAvatar")},getPlayerViewList:function(){for(var e=[],t=0;t<2;t++)e.push(this.getNodeByName("player"+t).getComponent("PlayerInfoView"));return e},initPlayers:function(t){var n=e("Player");this.id2player={},this.players=[];for(var r=this.getPlayerViewList(),i=0;i<t.length;i++){var o=t[i],a=new n(o.id,o.name,o.coin,0);this.id2player[a.id]=a,this.players.push(a);var c=r[i];if(void 0!==a){var u=this.createAvatar(a.id);u.id=a.id,a.avatar=u,a.infoView=c,c.init(a)}else c&&(c.active=!1)}}}),cc._RF.pop()},{LocalGameServer:"LocalGameServer",Player:"Player",TestClientNetHandler:"TestClientNetHandler"}],GameMaster:[function(e,t,n){"use strict";cc._RF.push(t,"81864Ihq3lM54KuTnHhBlkz","GameMaster"),cc.Class({extends:cc.Component,onLoad:function(){var e=this;window.gm=this,this.initMap(),this.initDice(),this.initCard(),this.lbTips=this.getLabel("lbSetTips"),this.addClickListener("btnClose",this.hide),this.node.setPosition(cc.visibleRect.center),this.hide(),this.addClickListener("btnCD",function(){e.success("\u8bbe\u7f6e\u65e0\u8d85\u65f6\u6210\u529f"),e.noTimeout=!0})},autoGM:function(){this.noTimeout=!0,gm.autoStart=!0,this.autoRank=!0,gm.playerCoin=2e3,this.setMap(),this.prebuildIndexList={1:[1,2],2:[3,4]},this.origin={1:30,2:30},this.diceList=[12,2,3,2,2,2,2,2,2],this.cardList=[7,7,7],this.autoBuyCard=!0,this.autoAcitonRoll=!0},show:function(){this.node.active=!0},hide:function(){this.node.active=!1},error:function(e){this.lbTips.string=e,this.lbTips.node.color=cc.Color.RED},success:function(e){this.lbTips.string=e,this.lbTips.node.color=cc.Color.GREEN},initMap:function(){var e=this;this.addClickListener("btnMap",function(){for(var t=[],n=0;n<4;++n){var r=e.getEditBox("ebTypes"+n).string.split("");r.unshift(0),t=t.concat(r)}if(t.length<40)e.error("\u5730\u56fe\u4e2a\u6570\u4e0d\u5bf9");else{for(var i=0;i<t.length;i++){var o=t[i];if(o=parseInt(o),isNaN(o)){e.error("\u8272\u5757\u7c7b\u578b\u6570\u5b57\u6709\u8bef");break}}e.setMap(t),e.setLocalData("map",t),e.success("\u8bbe\u7f6e\u5730\u56fe\u6210\u529f")}});var t=this.getLocalData("map");if(t)for(var n=0;n<4;++n){var r=10*n+1;this.getEditBox("ebTypes"+n).string=t.slice(r,r+9).join("")}},initDice:function(){var e=this;this.addClickListener("btnDice",function(){var t=e.getEditBox("ebDice"),n=t.string;n=parseInt(n),isNaN(n)||n<2||n>12?e.error("\u8bbe\u7f6e\u9ab0\u5b50\u6570\u5931\u8d25"):(t.string="",e.setDiceNum(n),e.success("\u8bbe\u7f6e\u9ab0\u5b50\u6570 "+n+" \u6210\u529f"))});for(var t=this.getNodeByName("dice"),n=2;n<=12;n++){var r=t.getNodeByName("btn"+n);r.setLabel("lbTitle",n),r.addOutline("lbTitle"),t.addClickListener("btn"+n,function(t){var n=t.currentTarget,r=parseInt(n.name.substr(3));e.setDiceNum(r),e.success("\u8bbe\u7f6e\u9ab0\u5b50\u6570 "+r+" \u6210\u529f"),e.hide()})}},initCard:function(){var e=this;this.addClickListener("btnCard",function(){var t=e.getEditBox("ebCard"),n=t.string;n=parseInt(n),isNaN(n)||n<1||n>12?e.error("\u8bbe\u7f6e\u5361\u7247\u5931\u8d25"):(t.string="",e.setCardType(n),e.success("\u8bbe\u7f6e\u5361\u7247"+n+"\u6210\u529f"),e.hide())})},setMap:function(e){if(!e){e=[0,6,2,8,4,3,3,3,3,3].concat([0,1,1,1,1,1,5,5,5,5]).concat([0,7,7,2,8,4,8,8,8,8]).concat([0,6,6,1,1,3,3,5,5,7])}this.tileTypeList=e},setCardType:function(e){this.cardType=e},getCardType:function(){if(gm.cardList&&gm.cardList.length)return gm.cardList.shift();var e=this.cardType;return this.cardType=null,e},setDiceNum:function(e){this.diceNum=e},getDiceNum:function(){if(gm.diceList&&gm.diceList.length)return gm.diceList.shift();var e=this.diceNum;return this.diceNum=null,e},setLocalData:function(e,t){cc.sys.localStorage.setItem(e,JSON.stringify(t))},getLocalData:function(e){var t=cc.sys.localStorage.getItem(e);return t?JSON.parse(t):null},checkPlayerDataSync:function(){for(var e=1;e<=2;e++){var t=game.controler.getPlayer(e),n=ServerPlayerManager.getInstance().getPlayer(e);console.log(t.name),console.log("-------------cup  client:"+t.cup+", server:"+n.cup),console.log("-------------coin client:"+t.coin+", server:"+n.coin),t.coin===n.coin&&t.cup===n.cup||console.log(t.name+"------------sync error----------------------")}}}),cc._RF.pop()},{}],GameOverCmd:[function(e,t,n){"use strict";cc._RF.push(t,"c0796Sa6eBGca88qzTwBQaq","GameOverCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("client:game over"),cpc("\u6e38\u620f\u7ed3\u675f"),n=game.controler.getPlayer(t.winnerId),e.next=5,game.gameOverView.show(n);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"unitTest",value:function(e){var t={msgType:NetMsgType.S2CGameOver,winnerId:e};game.netHandler.onSequenceMsg(t)}}]),t}();window.cmd=window.cmd||{},window.cmd.GameOverCmd=i,cc._RF.pop()},{}],GameOverView:[function(e,t,n){"use strict";cc._RF.push(t,"745801+86NKmIlgSIWdAIYI","GameOverView"),cc.Class({extends:cc.Component,onLoad:function(){this.hide()},show:function(e){var t=this;return this.node.active=!0,this.getSprite("imgHead").spriteFrame=game.resMgr.getHeadSpriteFrame(e.id),new Promise(function(e){t.node.y=cc.winSize.height/2+t.node.height;var n=[];n.push(cc.moveTo(.2,t.node.x,0)),n.push(cc.delayTime(3)),n.push(cc.callFunc(e)),t.node.runAction(cc.sequence(n))})},hide:function(){this.node.active=!1}}),cc._RF.pop()},{}],GameServerCardManager:[function(e,t,n){"use strict";cc._RF.push(t,"215710JrzpPGJLvTpa0lOHD","GameServerCardManager");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return r(e,[{key:"init",value:function(){this.cards=[];var e=0;e=this.addCards(ServerCard.ActionCard,8,e),e=this.addCards(ServerCard.BlockCard,8,e),e=this.addCards(ServerCard.CupCard,4,e),e=this.addCards(ServerCard.HouseCard,2,e),e=this.addCards(ServerCard.RemoveCard,2,e),e=this.addCards(ServerCard.CupAndHouseCard,1,e),e=this.addCards(ServerCard.SeizeCard,1,e),e=this.addCoinCards(3,CardType.Coin20,20,e),e=this.addCoinCards(4,CardType.Coin30,30,e),e=this.addCoinCards(4,CardType.Coin50,50,e),e=this.addCoinCards(2,CardType.Coin75,75,e),this.addCoinCards(1,CardType.Coin100,100,e);for(var t=[],n=0;n<this.cards.length;++n){var r=this.cards[n],i={id:r.id,type:r.type,coin:r.coin};t.push(i)}return t}},{key:"hasCard",value:function(){return this.cards.length>0}},{key:"draw",value:function(){var e=null,t=gm.getCardType();if(null!==t)for(var n=0;n<this.cards.length;n++){if(this.cards[n].type===t){e=n;break}}null===e&&(e=utils.randomInt(0,this.cards.length-1));var r=this.cards.splice(e,1)[0];return console.log("draw card:"+r),r}},{key:"addCards",value:function(e,t,n){for(var r=n,i=0;i<t;++i){var o=new e(r);this.cards.push(o),++r}return r}},{key:"addCoinCards",value:function(e,t,n,r){for(var i=r,o=0;o<e;++o){var a=new ServerCard.CoinCard(i,t,n);this.cards.push(a),++i}return i}}],[{key:"getInstance",value:function(){return e.ins||(e.ins=new e),e.ins}}]),e}();window.ServerCardManager=i,cc._RF.pop()},{}],GameServerCard:[function(e,t,n){"use strict";cc._RF.push(t,"6f94aszDwpN757+FtllwQal","GameServerCard");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(t,n){a(this,e),this.id=t,this.type=n}return r(e,[{key:"use",value:function(e,t){}},{key:"toString",value:function(){return""+this.type}}]),e}(),u={ActionCard:function(e){function t(e){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,CardType.Action))}return o(t,c),r(t,[{key:"use",value:function(e,t){ServerPlayerManager.getInstance().setActAgain()}},{key:"toString",value:function(){return"\u884c\u52a8\u5361:"+this.id}}]),t}(),CoinCard:function(e){function t(e,n,r){a(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.cost=r,o}return o(t,c),r(t,[{key:"use",value:function(e,t){e.changeCoin(this.cost)}},{key:"toString",value:function(){return"\u91d1\u5e01\u5361("+this.cost+"):"+this.id}}]),t}(),BlockCard:function(e){function t(e){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,CardType.Block))}return o(t,c),r(t,[{key:"use",value:function(e,t){t.addBlock()}},{key:"toString",value:function(){return"\u8def\u969c\u5361:"+this.id}}]),t}(),CupCard:function(e){function t(e){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,CardType.Cup))}return o(t,c),r(t,[{key:"use",value:function(e,t){e.changeCup(1)}},{key:"toString",value:function(){return"\u5956\u676f\u5361:"+this.id}}]),t}(),HouseCard:function(e){function t(e){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,CardType.House))}return o(t,c),r(t,[{key:"use",value:function(e,t){t.build(e,!0)}},{key:"toString",value:function(){return"\u623f\u5c4b\u5361:"+this.id}}]),t}(),RemoveCard:function(e){function t(e){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,CardType.Remove))}return o(t,c),r(t,[{key:"use",value:function(e,t){t.removeBuilding()}},{key:"toString",value:function(){return"\u62c6\u9664\u5361:"+this.id}}]),t}(),CupAndHouseCard:function(e){function t(e){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,CardType.CupAndHouse))}return o(t,c),r(t,[{key:"use",value:function(e,t){e.changeCup(1),t.build(e,!0)}},{key:"toString",value:function(){return"\u5956\u676f+\u623f\u5c4b\u5361:"+this.id}}]),t}(),SeizeCard:function(e){function t(e){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,CardType.Seize))}return o(t,c),r(t,[{key:"use",value:function(e,t){t.changeOwner(e)}},{key:"toString",value:function(){return"\u5f3a\u5360\u5361:"+this.id}}]),t}()};window.ServerCard=u,cc._RF.pop()},{}],GameServerMap:[function(e,t,n){"use strict";cc._RF.push(t,"0d111uEeJxNSYOldaWRyqTy","GameServerMap");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t)}return r(t,[{key:"init",value:function(){return this.initTiles()}},{key:"getBornTiles",value:function(){return[this.tiles[0],this.tiles[10],this.tiles[20],this.tiles[30]]}},{key:"getRegionTiles",value:function(e){var t=10*e+1;return this.tiles.slice(t,t+8)}},{key:"getTiles4Type",value:function(e){return this.type2tiles[e]}},{key:"getTile",value:function(e){return this.tiles[e]}},{key:"initTiles",value:function(){var n=t.createTileTypes();this.tiles=[],this.type2tiles=[];for(var r=e("GameServerTile"),i=0;i<constants.TileCount;i++){var o=n[i],a=new r(i,o);this.tiles.push(a);var c=this.type2tiles[o];void 0===c&&(this.type2tiles[o]=c=[]),c.push(a)}for(var u=1;u<=ServerConstants.TileTypeCount;++u)for(var s=this.type2tiles[u],l=s.length>1?constants.BaseRent*s.length:constants.MinRent,p=0;p<s.length;p++){s[p].buildCost=l}for(var d=[],f=0;f<this.tiles.length;f++){var h=this.tiles[f],m={type:h.type,buildCost:h.buildCost};d.push(m)}return d}},{key:"getMoveResult",value:function(e,t){if(this.tiles[e].hasBlock)return e;for(var n=0,r=1;r<=t;r++){if(n=(e+ServerConstants.TileCount+r)%ServerConstants.TileCount,this.tiles[n].hasBlock)break}return n}}],[{key:"createTileTypes",value:function(){if(gm.tileTypeList)return gm.tileTypeList;for(var e=[],t=[],n=1;n<=constants.TileTypeCount;++n)e.push(n),t.push(n,n,n,n,n);for(var r=constants.TileCount-4-constants.TileTypeCount,i=0;i<r;++i){var o=utils.randomInt(0,t.length-1),a=t.splice(o,1)[0];e.push(a)}for(var c=[];e.length>0;){var u=e.splice(utils.randomInt(0,e.length-1),1)[0];c.push(u)}for(var s=0;s<4;s++)c.insertElement(10*s,0);return c}},{key:"getInstance",value:function(){return t.ins||(t.ins=new t),t.ins}}]),t}();window.ServerMap=i,t.exports=i,cc._RF.pop()},{GameServerTile:"GameServerTile"}],GameServerPlayerManager:[function(e,t,n){"use strict";cc._RF.push(t,"ae5f9d3S9tOoYaFJsfAeUTK","GameServerPlayerManager");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t)}return r(t,[{key:"init",value:function(){var t=e("GameServerPlayer");this.id2player={1:new t(1,"1P"),2:new t(2,"2P")},this.players=[this.id2player[1],this.id2player[2]];for(var n=[],r=0;r<this.players.length;r++){var i=this.players[r];n.push({id:i.id,name:i.name,coin:i.coin})}return n}},{key:"rank",value:function(e){for(var t=0;t<e.length;++t)this.players[t]=this.getPlayer(e[t])}},{key:"getPlayer",value:function(e){return this.id2player[e]}},{key:"initPlayerTurn",value:function(){this.idxCurrentPlayer=0,this.currentPlayer=this.players[this.idxCurrentPlayer]}},{key:"setActAgain",value:function(){this.actAgain=!0}},{key:"nextPlayerTurn",value:function(){this.actAgain?this.actAgain=!1:(++this.idxCurrentPlayer,this.idxCurrentPlayer>=this.players.length&&(this.idxCurrentPlayer-=this.players.length),this.currentPlayer=this.players[this.idxCurrentPlayer])}}],[{key:"getInstance",value:function(){return t.ins||(t.ins=new t),t.ins}}]),t}();window.ServerPlayerManager=i,cc._RF.pop()},{GameServerPlayer:"GameServerPlayer"}],GameServerPlayer:[function(e,t,n){"use strict";cc._RF.push(t,"be19cEuwkJGsowYJPFYtvyw","GameServerPlayer");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),console.log("create player:"+t+", "+n),this.id=t,this.name=n,this.cup=0,this.coin=gm.playerCoin||constants.InitPlayerCoin,this.cards=[],this.usedCardCount=0,this.ownedTiles=[],this.achivements=[],this.influenceHandler=InfluenceHandler.getInstance()}return r(e,[{key:"toString",value:function(){var e="";return this.tile&&(e="\uff0c\u5730\u5757"+this.tile.idx),"("+this.name+e+")"}},{key:"changeCoin",value:function(e){this.coin+=e,console.log(this.name+" player coin change:"+this.coin),this.influenceHandler.changePlayerCoin(this.id,e)}},{key:"changeCup",value:function(e){this.cup+=e,console.log(this.name+" player cup change:"+this.cup),this.influenceHandler.changePlayerCup(this.id,e)}},{key:"gainCard",value:function(e){this.cards.push(e),this.influenceHandler.addPlayerCard(this.id,e.id)}},{key:"buyCard",value:function(e){this.gainCard(e),this.changeCoin(-this.getBuyCardCost())}},{key:"useCard",value:function(e){for(var t=0;t<this.cards.length;t++){var n=this.cards[t];if(n.type===e)return this.cards.splice(t,1),++this.usedCardCount,this.influenceHandler.usePlayerCard(this.id,n.type),n}return null}},{key:"getBuyCardCost",value:function(){return ServerAchievementManager.getInstance().hasBuyCardDiscount(this)?constants.BuyCardDiscountCost:constants.BuyCardCost}},{key:"addAchievement",value:function(e){this.achivements.push(e),this.changeCup(1)}},{key:"removeAchievement",value:function(e){this.achivements.removeElement(e),this.changeCup(-1)}},{key:"enterTile",value:function(e){this.tile=e,e.removeBlock()}},{key:"build",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ownedTiles.push(e),this.changeCup(1),!t){var n=e.getBuildCost(this);this.changeCoin(-n)}}},{key:"removeTile",value:function(e){this.ownedTiles.removeElement(e),this.changeCup(-1)}},{key:"getTileTypesCount",value:function(){for(var e=[],t=0;t<this.ownedTiles.length;t++){var n=this.ownedTiles[t];e.includes(n.type)||e.push(n.type)}return e.length}}]),e}();t.exports=i,cc._RF.pop()},{}],GameServerTile:[function(e,t,n){"use strict";cc._RF.push(t,"47942StvnxCY7JfQURBaeoU","GameServerTile");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.idx=t,this.type=n,this.buildCost=0,this.owner=null,this.hasBlock=!1,this.isOrigin=0===n,this.region=Math.floor(t/10)}return r(e,[{key:"getBuildCost",value:function(e){var t=this.buildCost;return ServerAchievementManager.getInstance().getBuildDiscount(e)&&(t-=constants.BuildDiscount),t}},{key:"build",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.owner=e,e.build(this,t),InfluenceHandler.getInstance().changeTileOwner(this.idx,null,e.id),ServerAchievementManager.getInstance().checkTileAchievements(this)}},{key:"removeBuilding",value:function(){var e=this.owner;e.removeTile(this),this.owner=null,InfluenceHandler.getInstance().changeTileOwner(this.idx,e.id,null),ServerAchievementManager.getInstance().checkTileAchievements(this,e)}},{key:"changeOwner",value:function(e){var t=this.owner,n=null;t&&(n=t.id,t.removeTile(this)),this.owner=e,e.build(this,!0),InfluenceHandler.getInstance().changeTileOwner(this.idx,n,e.id),ServerAchievementManager.getInstance().checkTileAchievements(this,t)}},{key:"addBlock",value:function(){this.hasBlock=!0}},{key:"removeBlock",value:function(){this.hasBlock=!1}}]),e}();t.exports=i,cc._RF.pop()},{}],GameStartCmd:[function(e,t,n){"use strict";cc._RF.push(t,"08e6bXMDFhNLKkOBBrBUzpP","GameStartCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(e){console.log("client:game start"),cpc("\u6e38\u620f\u5f00\u59cb"),this.initGame(e)}},{key:"initGame",value:function(e){game.map.initTiles(e.tiles),game.tileSelector.init(),game.controler.initPlayers(e.players),game.achievementMgr.init()}}]),t}();window.cmd=window.cmd||{},window.cmd.GameStartCmd=i,cc._RF.pop()},{}],GameViewManager:[function(e,t,n){"use strict";cc._RF.push(t,"0a4565dbOhOSKk1hC/wn01W","GameViewManager"),cc.Class({extends:cc.Component,properties:{AchievementTotalView:{default:null,type:cc.Prefab},ActionRollView:{default:null,type:cc.Prefab},BuildConfirmView:{default:null,type:cc.Prefab},CardInquiryView:{default:null,type:cc.Prefab},CardSelectView:{default:null,type:cc.Prefab},DiceView:{default:null,type:cc.Prefab},DrawCardView:{default:null,type:cc.Prefab},FloatItem:{default:null,type:cc.Prefab},GameOverView:{default:null,type:cc.Prefab},OriginSelectView:{default:null,type:cc.Prefab},PrepareBuildConfirmView:{default:null,type:cc.Prefab},PrepareBuildView:{default:null,type:cc.Prefab},RankDiceView:{default:null,type:cc.Prefab},TileCardUseView:{default:null,type:cc.Prefab},TipsView:{default:null,type:cc.Prefab},UnbuildableTipsView:{default:null,type:cc.Prefab},WinConditionTipsView:{default:null,type:cc.Prefab}},onLoad:function(){game.viewMgr=this},getView:function(e){if(!e.ins){var t=cc.instantiate(e);t.setPosition(0,0),t.parent=this.node,e.ins=t.getComponent(e.name)}return e.ins}}),cc._RF.pop()},{}],Global:[function(e,t,n){"use strict";cc._RF.push(t,"d80b2VxlpJMlaPVmRnlhR2c","Global");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),t.ins?console.error("Global singleton error!"):(this.eventManager=e("onfire"),this.i18n=e("chs"))}return r(t,[{key:"achievementTotalView",get:function(){return game.viewMgr.getView(game.viewMgr.AchievementTotalView)}},{key:"actionRollView",get:function(){return game.viewMgr.getView(game.viewMgr.ActionRollView)}},{key:"buildConfirmView",get:function(){return game.viewMgr.getView(game.viewMgr.BuildConfirmView)}},{key:"unbuildableTipsView",get:function(){return game.viewMgr.getView(game.viewMgr.UnbuildableTipsView)}},{key:"cardInquiryView",get:function(){return game.viewMgr.getView(game.viewMgr.CardInquiryView)}},{key:"cardSelectView",get:function(){return game.viewMgr.getView(game.viewMgr.CardSelectView)}},{key:"diceView",get:function(){return game.viewMgr.getView(game.viewMgr.DiceView)}},{key:"drawCardView",get:function(){return game.viewMgr.getView(game.viewMgr.DrawCardView)}},{key:"floatItemMgr",get:function(){return game.viewMgr.getView(game.viewMgr.FloatItem)}},{key:"gameOverView",get:function(){return game.viewMgr.getView(game.viewMgr.GameOverView)}},{key:"originSelectView",get:function(){return game.viewMgr.getView(game.viewMgr.OriginSelectView)}},{key:"prepareBuildConfirmView",get:function(){return game.viewMgr.getView(game.viewMgr.PrepareBuildConfirmView)}},{key:"prepareBuildView",get:function(){return game.viewMgr.getView(game.viewMgr.PrepareBuildView)}},{key:"rankDiceView",get:function(){return game.viewMgr.getView(game.viewMgr.RankDiceView)}},{key:"tileCardUseView",get:function(){return game.viewMgr.getView(game.viewMgr.TileCardUseView)}},{key:"tipsView",get:function(){return game.viewMgr.getView(game.viewMgr.TipsView)}},{key:"winConditionTipsView",get:function(){return game.viewMgr.getView(game.viewMgr.WinConditionTipsView)}}],[{key:"getInstance",value:function(){return t.ins||(t.ins=new t),t.ins}}]),t}();t.exports=i,cc._RF.pop()},{chs:"chs",onfire:"onfire"}],HouseCard:[function(e,t,n){"use strict";cc._RF.push(t,"4fdecSj4DZACo43vlbAXEr+","HouseCard");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}var a=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,CardType.House));return e.name="\u623f\u5c4b\u5361",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,luckyCard.BaseCard),r(t,[{key:"use",value:function(){var e=o(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.use4tile("\u8bf7\u5728\u4efb\u610f\u7a7a\u5730\u4e0a\u5efa\u9020\u623f\u5c4b",t.tileFilter,n));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"displayUse",value:function(){var e=o(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"displayUse",this).call(this);case 2:return e.next=4,n.build(r);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"toString",value:function(){return"\u623f\u5c4b\u5361\u63cf\u8ff0"}}],[{key:"tileFilter",value:function(e){return!e.isOrigin&&!e.owner}}]),t}();luckyCard.HouseCard=a,cc._RF.pop()},{}],IndustryMonopolyAchievement:[function(e,t,n){"use strict";cc._RF.push(t,"07808P6eYdO4aA/qkITeD8j","IndustryMonopolyAchievement");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(e,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.tiles=n,r.subType=r.tiles[0].type,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ServerAchievement),r(t,[{key:"checkTile",value:function(e,t){e.owner?this.checkBuild(e,t):this.checkRemoveTile(e,t)}},{key:"checkBuild",value:function(e){this.isAchieved(e.owner)?this.updateOwner(e.owner):this.owner&&!this.isAchieved(this.owner)&&this.updateOwner(null)}},{key:"checkRemoveTile",value:function(e,t){this.owner===t&&this.updateOwner(null)}},{key:"isAchieved",value:function(e){for(var t=0;t<this.tiles.length;t++)if(this.tiles[t].owner!==e)return!1;return!0}}]),t}();window.IndustryMonopolyAchievement=i,cc._RF.pop()},{}],InfluenceHandler:[function(e,t,n){"use strict";cc._RF.push(t,"04868+XvDtFErHsm2CTkGdo","InfluenceHandler");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.clear()}return r(e,[{key:"getPlayerData",value:function(e){this.players||(this.players={});var t=this.players[e];return t||(t=this.players[e]={id:e,coin:0,cup:0,addCardType:null,useCardType:null}),t}},{key:"changePlayerCoin",value:function(e,t){this.getPlayerData(e).coin+=t}},{key:"changePlayerCup",value:function(e,t){this.getPlayerData(e).cup+=t}},{key:"addPlayerCard",value:function(e,t){this.getPlayerData(e).addCardType=t}},{key:"usePlayerCard",value:function(e,t){this.getPlayerData(e).useCardType=t}},{key:"getTile",value:function(e){this.tiles||(this.tiles={});var t=this.tiles[e];return t||(t=this.tiles[e]={idx:e}),t}},{key:"changeTileOwner",value:function(e,t,n){var r=this.getTile(e);r.from=t,r.to=n}},{key:"addTileBlock",value:function(e){this.getTile(e).block=!0}},{key:"getAchievement",value:function(e){this.type2Achivement||(this.type2Achivement={});var t=this.type2Achivement[e];return t||(t=this.type2Achivement[e]={}),t}},{key:"changeAchievementOwner",value:function(e,t,n){this.achievements||(this.achievements=[]),this.achievements.push({type:e,subType:t,ownerId:n})}},{key:"broadcast",value:function(){this.achievements&&(ServerNetHandler.getInstance().sendAchievementChange(this.achievements),this.clear())}},{key:"clear",value:function(){this.players=null,this.tiles=null,this.achievements=null}}],[{key:"getInstance",value:function(){return e.ins||(e.ins=new e),e.ins}}]),e}();window.InfluenceHandler=i,cc._RF.pop()},{}],InitLoader:[function(e,t,n){"use strict";cc._RF.push(t,"9f439uDJCJCn7caD6hCd/j7","InitLoader");cc.loader.addDownloadHandlers({bin:function(e,t){var n=e.url,r=cc.loader.getXMLHttpRequest();r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=function(e){var n=r.response;if(n){var i=new Uint8Array(n);t(null,i)}else t("download binary file failed")},r.onerror=function(){t("download binary file failed")},r.send(null)}}),cc._RF.pop()},{}],LocalGameServer:[function(e,t,n){"use strict";cc._RF.push(t,"4a0f1O8+4VB/JqpswLJm/hM","LocalGameServer");var r={init:function(){this.initNet()},initNet:function(){var e=ServerNetHandler.getInstance();e.init(),e.registerMsgCommand(NetMsgType.C2SRoll,serverCommand.RollCmd),e.registerMsgCommand(NetMsgType.C2SPrebuild,serverCommand.PrebuildCmd),e.registerMsgCommand(NetMsgType.C2SSelectOrigin,serverCommand.SelectOriginCmd),e.registerMsgCommand(NetMsgType.C2SAction,serverCommand.RoundActionCmd)},gameStart:function(){(new serverCommand.RoomGameStartCmd).execute()}};t.exports=r,cc._RF.pop()},{}],Map:[function(e,t,n){"use strict";cc._RF.push(t,"171a1y3ki5OPJ8vUK2Adw5b","Map"),cc.Class({extends:cc.Component,onLoad:function(){game.map=this,this.initTileImageInfo(),this.adapt()},adapt:function(){var e=cc.winSize.width/cc.winSize.height,t=this.node.width/this.node.height;this.node.scale=e>t?cc.winSize.height/this.node.height:cc.winSize.width/this.node.width,this.scale=this.node.scale},getTile:function(e){return this.tiles[e]},initTiles:function(e){this.tiles=[],this.type2tiles=[];for(var t=0;t<constants.TileCount;t++){var n=this.getNodeByName("tile"+t).getComponent("Tile"),r=e[t],i=r.type;n.init(t,i,r.buildCost),this.tiles.push(n);var o=this.type2tiles[i];void 0===o&&(this.type2tiles[i]=o=[]),o.push(n)}},getTiles4Type:function(e){return this.type2tiles[e]},movePlayerTo:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t,n){var r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.getStandTile().idx,n<r&&(n+=constants.TileCount),i=r+1;case 3:if(!(i<=n)){e.next=11;break}return o=(i+constants.TileCount)%constants.TileCount,a=this.tiles[o],e.next=8,a.stepOn(t);case 8:i++,e.next=3;break;case 11:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),handleTileBalance:function(e){var t=this.getTiles4Type(e.type),n=20;game.achievementMgr.hasRentBonus(e.type)&&(n=40);for(var r=[],i=0;i<t.length;i++){var o=t[i];if(o.owner){var a=o.balance(n);r.push(a)}}return Promise.all(r)},initTileImageInfo:function(){game.imagePixelsMap={};var t=e("TileImageInfo");for(var n in t){var r=t[n];r.pixels=r.pixels.split("");for(var i=[],o=0;o<r.width;++o)for(var a=i[o]=[],c=0;c<r.height;++c)a[c]=parseInt(r.pixels[r.height*o+c])>0;game.imagePixelsMap[n]=i}}}),cc._RF.pop()},{TileImageInfo:"TileImageInfo"}],ModalManager:[function(e,t,n){"use strict";cc._RF.push(t,"e572bV6uIdJjLBj/gd8IZvr","ModalManager");var r=cc.Class({extends:cc.Node,init:function(){cc.game.addPersistRootNode(this),this.nodeList=[],this.singletonDlgMap={}},show:function(e){if(null!==e&&-1===this.nodeList.indexOf(e)){if(e.setPosition(cc.visibleRect.center),this.addChild(e),this.nodeList.length>1)this.nodeList[this.nodeList.length-1].modalComponent.top(!1);e.modalComponent.top(!0),this.nodeList.push(e)}},hide:function(e){(this.nodeList.removeElement(e),this.nodeList.length>0)&&this.nodeList[this.nodeList.length-1].modalComponent.top(!0);e.modalComponent.top(!1),e.modalComponent.playHideEffect(function(){e.removeFromParent()}.bind(this))},showDialog:function(e,t,n,r,i){if(t){var o=this.singletonDlgMap[e];if(null!=o)return o.setData(n),o.setCloseCallback(r),void 0!=i&&(o.node.zIndex=i),void this.show(o.node)}cc.loader.loadRes(e,cc.Prefab,function(o,a){if(!o){var c=cc.instantiate(a);void 0!=i&&(c.zIndex=i),this.show(c);var u=c.modalComponent;u.setCloseCallback(r),u.setData(n),t&&(this.singletonDlgMap[e]=u)}}.bind(this))},hideDialog:function(e){var t=this.singletonDlgMap[e];t&&t.hide()},hideAllDialog:function(){for(var e=0;e<this.nodeList.length;e++)this.hide(this.nodeList[e])},statics:{instance:null,getInstance:function(){return null==r.instance&&(r.instance=new r,r.instance.init()),r.instance}}});t.exports=r,cc._RF.pop()},{}],OriginRollResultCmd:[function(e,t,n){"use strict";cc._RF.push(t,"8b90bwlosJF56GF6R6zABwF","OriginRollResultCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,game.diceView.showResult(t.dice);case 2:if(n=game.controler.getPlayer(t.playerId),game.diceView.hide(),!t.cardType){e.next=9;break}return e.next=7,n.gainCard(t.cardType);case 7:e.next=11;break;case 9:return e.next=11,game.tipsView.show(game.i18n.draw_card_failed);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"unitTest",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r={type:RollType.Origin,playerId:e,dice:t,cardType:n};return(new cmd.RollResultCmd).execute(r)}}]),t}();window.cmd=window.cmd||{},window.cmd.OriginRollResultCmd=i,cc._RF.pop()},{}],OriginRollTurnCmd:[function(e,t,n){"use strict";cc._RF.push(t,"a3ee7MCMk1PfZxaqiB7niAZ","OriginRollTurnCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=game.controler.getPlayer(t.playerId),r=CDTime.DrawCard,n.updateState(PlayerState.Roll,r),game.controler.isHero(t.playerId)){e.next=5;break}return e.abrupt("return");case 5:if(!this.gmTest()){e.next=7;break}return e.abrupt("return");case 7:if(t.hasCard){e.next=11;break}return e.next=10,game.tipsView.show(game.i18n.draw_card_void);case 10:return e.abrupt("return");case 11:return e.next=13,game.drawCardView.show(r);case 13:game.netHandler.roll(RollType.Origin),game.diceView.show();case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"gmTest",value:function(){if(gm.autoOriginRoll)return game.diceView.show(),game.netHandler.roll(RollType.Origin),!0}}],[{key:"unitTest",value:function(e){game.controler.setHero(e);var t={type:RollType.Origin,playerId:e};return(new cmd.RollTurnCmd).execute(t)}}]),t}();window.cmd=window.cmd||{},window.cmd.OriginRollTurnCmd=i,cc._RF.pop()},{}],OriginSelectView:[function(e,t,n){"use strict";cc._RF.push(t,"3c35bXd9Z5JbqLGkMcLRgG1","OriginSelectView"),cc.Class({extends:cc.Component,onLoad:function(){this.cd=this.getNodeByName("cd").getComponent("CountdownHandler"),this.hide()},show:function(e,t,n){var r=this;this.node.active=!0,this.getLabel("lbTitle").string=e,this.getLabel("lbTips").string=t,this.cd.startCount(CDTime.OriginSelect,function(){n&&n(),r.hide()})},hide:function(){this.cd.hide(),this.node.active=!1}}),cc._RF.pop()},{}],OriginTile:[function(e,t,n){"use strict";cc._RF.push(t,"a60bfkqUNZK34GvMzbB0A3h","OriginTile"),cc.Class({extends:e("Tile"),onLoad:function(){this._super(),this.isOrigin=!0},isBuildable:function(){return!1},setOwner:function(){}}),cc._RF.pop()},{Tile:"Tile"}],PlayerAvatar:[function(e,t,n){"use strict";cc._RF.push(t,"3aee3MCQytNsJnXetoS2OiD","PlayerAvatar"),cc.Class({extends:cc.Component,onLoad:function(){this.initState()},initState:function(){this.stateView=this.getNodeByName("cState"),this.stateCD=this.stateView.getComponent("CountdownHandler"),this.spState=this.stateView.getSprite("img"),this.stateView.active=!1},enterTile:function(e){this.tile=e},updateState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e!==PlayerState.None?(this.stateCD.startCount(t),this.spState.spriteFrame=game.resMgr.getStateIcon(e,this.id)):this.stateView.active=!1},startAct:function(){var e=[];e.push(cc.scaleTo(.5,1.5)),e.push(cc.scaleTo(.5,1)),this.node.runAction(cc.repeatForever(cc.sequence(e)))},stopAct:function(){this.node.stopAllActions(),this.node.scale=1}}),cc._RF.pop()},{}],PlayerInfoView:[function(e,t,n){"use strict";cc._RF.push(t,"05288YfJANE6L+39mviNhe0","PlayerInfoView"),cc.Class({extends:cc.Component,onLoad:function(){this.achivementView=this.getNodeByName("cAchievement").getComponent("AchievementView"),this.addOutline("lbName")},updateAchievement:function(e){this.achivementView.udpateView(e)},init:function(e){this.setName(e.name),this.updateInfo(e)},updateInfo:function(e){this.updateCoin(e.coin),this.updateCup(e.cup),this.updateCard(e.card)},setName:function(e){this.getLabel("lbName").string=e},updateCoin:function(e){this.getLabel("lbCoin").string=e},updateCup:function(e){this.getLabel("lbCup").string="x"+e},updateCard:function(e){this.getLabel("lbCard").string="x"+e},getCoinPosition:function(){return this.ptCoin||(this.ptCoin=this.getNodeByName("imgCoin").convertToWorldSpaceAR(cc.v2(0,0))),this.ptCoin},getCupPosition:function(){return this.ptCup||(this.ptCup=this.getNodeByName("imgCup").convertToWorldSpaceAR(cc.v2(0,0))),this.ptCup},getCardPosition:function(){return this.ptCard||(this.ptCard=this.getNodeByName("imgCard").convertToWorldSpaceAR(cc.v2(0,0))),this.ptCard}}),cc._RF.pop()},{}],Player:[function(e,t,n){"use strict";cc._RF.push(t,"7c52bvKHmNHfr2HDiDsxH0S","Player");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}var o=function(){function e(t,n,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.changeListeners=[],this.name=n,this.coin=r,this.cup=0,this.card=0,this.usedCardCount=0,this.id=t,this.avatar=null,this.infoView=null,this.ownedTiles=[],this.cards={},this.achivements=[]}return r(e,[{key:"addAchievement",value:function(e){this.achivements.push(e),this.changeCup(1),this.infoView.updateAchievement(this.achivements)}},{key:"removeAchievement",value:function(e){this.achivements.removeElement(e),this.changeCup(-1),this.infoView.updateAchievement(this.achivements)}},{key:"build",value:function(){var e=i(regeneratorRuntime.mark(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t=this.avatar.tile),n>0&&this.changeCoin(-n),t.build(this),this.ownedTiles.push(t),e.next=6,this.gainCup(t.ptWorld);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removeBuilding",value:function(e){this.ownedTiles.removeElement(e),this.changeCup(-1)}},{key:"enterTile",value:function(e){e.standPlayer(this),this.avatar.enterTile(e),e.hasBlock&&e.removeBlock()}},{key:"getStandTile",value:function(){return this.avatar.tile}},{key:"updateInfoView",value:function(){this.infoView.updateInfo(this)}},{key:"changeCoin",value:function(e){this.coin+=e,this.updateInfoView()}},{key:"changeCup",value:function(e){this.cup+=e,this.updateInfoView()}},{key:"changeCard",value:function(e){this.card+=e,this.updateInfoView()}},{key:"listenChange",value:function(e){this.changeListeners.includes(e)||this.changeListeners.push(e)}},{key:"notifyChange",value:function(){for(var e=0;e<this.changeListeners.length;e++){this.changeListeners[e].call()}}},{key:"startAct",value:function(){this.avatar.startAct()}},{key:"stopAct",value:function(){this.avatar.stopAct()}},{key:"getTile",value:function(){return this.avatar.tile}},{key:"getCoinPosition",value:function(){return this.infoView.getCoinPosition()}},{key:"getCupPosition",value:function(){return this.infoView.getCupPosition()}},{key:"getCardPosition",value:function(){return this.infoView.getCardPosition()}},{key:"gainCup",value:function(){var e=i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,game.floatItemMgr.floatCup(t,this.getCupPosition());case 2:this.changeCup(1);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"gainCoin",value:function(){var e=i(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,game.floatItemMgr.floatCoin(n,t,this.getCoinPosition());case 2:this.changeCoin(n);case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"gainCard",value:function(){var e=i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("gain card type:"+t),e.next=3,game.cardMgr.showPlayerGainCard(this,t);case 3:this.addCard(t);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"buyCard",value:function(){var e=i(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gainCard(t);case 2:this.changeCoin(-n);case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"addCard",value:function(e){var t=this.cards[e];t||(t=0),this.cards[e]=t+1,this.card+=1,this.updateInfoView()}},{key:"useCard",value:function(e){var t=this.cards[e];t&&(this.cards[e]=t-1,this.card-=1,this.usedCardCount+=1),this.updateInfoView()}},{key:"getBuyCardCost",value:function(){return game.achievementMgr.hasBuyCardDiscount(this)?constants.BuyCardDiscountCost:constants.BuyCardCost}},{key:"updateState",value:function(e,t){this.avatar.updateState(e,t)}},{key:"isHero",value:function(){return this.id===game.hero.id}},{key:"getRegionTileCount",value:function(e){for(var t=0,n=0;n<this.ownedTiles.length;n++){this.ownedTiles[n].region===e&&++t}return t}},{key:"getTileTypes",value:function(){for(var e=[],t=0;t<this.ownedTiles.length;t++){var n=this.ownedTiles[t];e.includes(n.type)||e.push(n.type)}return e.sort(),e}}]),e}();t.exports=o,cc._RF.pop()},{}],PrebuildCmd:[function(e,t,n){"use strict";cc._RF.push(t,"365f8/ys6RKQ7Pe6QAKveR+","PrebuildCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.netHandler=ServerNetHandler.getInstance(),e.playerMgr=ServerPlayerManager.getInstance(),e.gameController=ServerGameController.getInstance(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,serverCommand.BaseCommand),r(t,[{key:"execute",value:function(e){if(this.gameController.checkValidity(e)){var t=this.playerMgr.getPlayer(e.playerId),n=ServerMap.getInstance().getTile(e.tileIdx);n.build(t),spc("\u51c6\u5907\u9636\u6bb5\uff1a\u73a9\u5bb6"+t+"\u9009\u62e9\u5efa\u9020\u623f\u5c4b\u5728\u5730\u5757:"+e.tileIdx),this.netHandler.sendPrebuildResult(t.id,n.idx,n.buildCost),InfluenceHandler.getInstance().broadcast(),this.gameController.handlePrebuild(e.playerId)}}}]),t}();window.serverCommand=window.serverCommand||{},window.serverCommand.PrebuildCmd=i,cc._RF.pop()},{}],PrebuildResultCmd:[function(e,t,n){"use strict";cc._RF.push(t,"2b5f2zSpIhC6YgeaBKAUrvr","PrebuildResultCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.playerId),n=game.controler.getPlayer(t.playerId),r=game.map.getTile(t.tileIdx),e.next=5,n.build(r,t.cost);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"unitTest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n={msgType:NetMsgType.S2CPrebuildResult,playerId:e,tileIdx:t,cost:constants.BuildBaseCost};game.netHandler.onSequenceMsg(n)}}]),t}();window.cmd=window.cmd||{},window.cmd.PrebuildResultCmd=i,cc._RF.pop()},{}],PrebuildTurnCmd:[function(e,t,n){"use strict";cc._RF.push(t,"fd4caV39/1GA6nfSE/IvuYf","PrebuildTurnCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"onTimeout",value:function(){var e=i(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,game.prepareBuildView.show(t);case 2:for(n=game.map.tiles,r=[],i=0;i<n.length;i++)o=n[i],this.tileFilter(o)&&r.push(o);return a=utils.randomInt(0,r.length-1),c=r[a],e.abrupt("return",c);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"tileFilter",value:function(e){return!e.owner&&!e.isOrigin&&e.buildCost<=game.hero.coin}},{key:"selectTile",value:function(){var e=i(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,game.tileSelector.getSelectTile(this.tileFilter);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,game.prepareBuildConfirmView.show(t,t.buildCost);case 7:if(!e.sent){e.next=10;break}return e.abrupt("return",t);case 10:return e.abrupt("return",this.selectTile());case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"execute",value:function(){var e=i(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(game.controler.showAchievementTips(!0),game.controler.setHero(t.playerId),game.controler.isHero(t.playerId)){e.next=4;break}return e.abrupt("return");case 4:if(!this.gmTest(t.playerId,t.index)){e.next=6;break}return e.abrupt("return");case 6:return n=this.onTimeout(t.index),r=this.selectTile(),e.next=10,Promise.race([n,r]);case 10:i=e.sent,game.netHandler.prebuild(i.idx),game.tileSelector.hide(),game.prepareBuildView.hide(),game.prepareBuildConfirmView.hide();case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"gmTest",value:function(e,t){var n=gm.prebuildIndexList;if(n){var r=n[e][t];return game.netHandler.prebuild(r),!0}}}],[{key:"unitTest",value:function(e){var t={msgType:NetMsgType.S2CPrebuildTurn,playerId:e};game.netHandler.onSequenceMsg(t)}}]),t}();window.cmd=window.cmd||{},window.cmd.PrebuildTurnCmd=o,cc._RF.pop()},{}],PrepareBuildConfirmView:[function(e,t,n){"use strict";cc._RF.push(t,"72944erruhGB7yKfnGZs77g","PrepareBuildConfirmView"),cc.Class({extends:cc.Component,onLoad:function(){this.addClickListener("btnOK",this.onBtnOK,this),this.addClickListener("btnCancel",this.onBtnCancel,this),this.hide()},hide:function(){this.node.active=!1},show:function(e,t){var n=this;this.node.active=!0;var r=this.node.parent.convertToNodeSpaceAR(e.node.convertToWorldSpaceAR(cc.v2(0,0)));return this.node.setPosition(r),this.getLabel("lbTitle").string="\u6d88\u8017"+t+"\u91d1\u5e01\uff0c\u786e\u8ba4\u5417\uff1f",this.addOutline("lbTitle",cc.Color.BLACK,3),this.getSprite("imgBuilding").spriteFrame=game.resMgr.getBuildingSpriteFrame(game.hero.id),new Promise(function(e){n.callback=e})},onBtnOK:function(){this.callback&&this.callback(!0),this.callback=null,this.hide()},onBtnCancel:function(){this.callback&&this.callback(!1),this.callback=null,this.hide()}}),cc._RF.pop()},{}],PrepareBuildView:[function(e,t,n){"use strict";cc._RF.push(t,"7d319MeGt5MPYidnvhz76iQ","PrepareBuildView"),cc.Class({extends:cc.Component,onLoad:function(){this.cd=this.getNodeByName("cd").getComponent("CountdownHandler"),this.hide()},show:function(e){var t=this;this.node.active=!0,this.setLabel("lbTitle",game.i18n.prebuild_tips.format(game.hero.name,game.i18n.prebuild_index[e]));for(var n=1;n<=constants.TileTypeCount;n++){var r=game.map.getTiles4Type(n),i=this.getNodeByName("item"+n);i.getNodeByName("imgTile").color=Type2Color[n],i.getLabel("lbCost").string="("+r.length+") "+r[0].buildCost}return new Promise(function(e){t.cd.startCount(CDTime.Prebuild,e)})},hide:function(){this.node.active=!1,this.cd.hide()}}),cc._RF.pop()},{}],RankDiceView:[function(e,t,n){"use strict";cc._RF.push(t,"13fd7brtdpDV6Ie2kcwXqKi","RankDiceView"),cc.Class({extends:cc.Component,onLoad:function(){this.addClickListener("btnDice",this.onBtnDice,this),this.lbDiceNums=[];for(var e=0;e<2;e++){var t=this.getLabel("lbDiceNum"+e);this.lbDiceNums.push(t)}this.cd=this.getNodeByName("cd").getComponent("CountdownHandler"),this.btnDice=this.getButton("btnDice"),this.hide()},hide:function(){this.node.active=!1},show:function(){var e=this;console.log("show rank roll view"),this.node.active=!0,this.btnDice.interactable=!0,this.cd.startCount(CDTime.RankRoll,this.onBtnDice.bind(this));for(var t=0;t<this.lbDiceNums.length;t++){this.lbDiceNums[t].string=""}return gm.autoRank&&setTimeout(this.onBtnDice.bind(this),100),this.results={},new Promise(function(t){e.onRollCallback=t})},onBtnDice:function(){this.onRollCallback&&this.onRollCallback(),this.onRollCallback=null,this.startRoll(0),this.startRoll(1),this.cd.hide(),this.btnDice.interactable=!1},startRoll:function(e){var t=this.lbDiceNums[e],n=[];n.push(cc.delayTime(.03)),n.push(cc.callFunc(function(){t.string=utils.randomInt(2,12)})),t.node.runAction(cc.repeatForever(cc.sequence(n))),t.startTime=Date.now()},setResult:function(e,t){var n=this,r=t[0]+t[1],i=this.lbDiceNums[e],o=1e3,a=1;i.scheduleOnce(function(){i.node.stopAllActions(),i.string=r,n.results[e]=r,setTimeout(n.checkOver.bind(n),o)},a)},checkOver:function(){var e=this;if(this.results[0]&&this.results[1]){var t=this.lbDiceNums[0],n=this.lbDiceNums[1];if(this.results[0]===this.results[1])return t.string="\u5e73\u5c40\u518d\u6295",n.string="\u5e73\u5c40\u518d\u6295",void this.scheduleOnce(this.onShowResult,1);this.results[0]>this.results[1]?(t.string="\u5148\u624b",n.string="\u540e\u624b"):(t.string="\u540e\u624b",n.string="\u5148\u624b"),this.scheduleOnce(function(){e.hide(),setTimeout(function(){e.onShowResult&&e.onShowResult(),e.onShowResult=null},100)},1)}},showRankResult:function(e){var t=this;return console.log("show rank result"),new Promise(function(n){t.rank=e,t.onShowResult=n})}}),cc._RF.pop()},{}],RankRollResultCmd:[function(e,t,n){"use strict";cc._RF.push(t,"83dc8uIT65KZ4c/RytNg2sO","RankRollResultCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){var n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=game.controler.getPlayerIdx(t.playerId),game.rankDiceView.setResult(n,t.dice),!t.rank){e.next=8;break}for(console.log("befor show rank result"),r=[],i=0;i<r.length;i++)o=r[i],r[i]=game.controler.getPlayerIdx(o);return e.next=8,game.rankDiceView.showRankResult(r);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"unitTest",value:function(e,t,n){var r={type:RollType.Rank,playerId:e,dice:t,rank:n};return(new cmd.RollResultCmd).execute(r)}}]),t}();window.cmd=window.cmd||{},window.cmd.RankRollResultCmd=i,cc._RF.pop()},{}],RankRollTurnCmd:[function(e,t,n){"use strict";cc._RF.push(t,"07949d7BHNN/JpccenOuSjQ","RankRollTurnCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(cc.assert(t.playerId),!game.controler.isHero(t.playerId)){e.next=6;break}return e.next=4,game.rankDiceView.show();case 4:setTimeout(function(){game.controler.setHero(1),game.netHandler.roll(RollType.Rank)},100),setTimeout(function(){game.controler.setHero(2),game.netHandler.roll(RollType.Rank)},200);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"unitTest",value:function(e){game.controler.setHero(e);var t={type:RollType.Rank,playerId:e};return(new cmd.RollTurnCmd).execute(t)}}]),t}();window.cmd=window.cmd||{},window.cmd.RankRollTurnCmd=i,cc._RF.pop()},{}],RegionalMonopolyAchievement:[function(e,t,n){"use strict";cc._RF.push(t,"0b1dalx+e5F+7u7FMVCDwKa","RegionalMonopolyAchievement");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(e,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.tiles=n,r.subType=r.tiles[0].region,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ServerAchievement),r(t,[{key:"checkTile",value:function(e,t){e.owner?this.checkBuild(e):this.checkRemoveTile(e,t)}},{key:"getMaxAchiever",value:function(){for(var e=ServerPlayerManager.getInstance().players,t=null,n=0;n<e.length;n++){var r=e[n],i=this.getPlayerAchieveCount(r);if(i>=3){if(t&&this.getPlayerAchieveCount(t)>=i)continue;t=r}}return t}},{key:"getPlayerAchieveCount",value:function(e){for(var t=0,n=0;n<this.tiles.length;n++){this.tiles[n].owner===e&&++t}return t}},{key:"checkBuild",value:function(e){var t=e.owner;if(t!==this.owner){var n=this.getPlayerAchieveCount(t);if(n>=3){if(this.owner&&this.getPlayerAchieveCount(this.owner)>=n)return;this.updateOwner(t)}}}},{key:"checkRemoveTile",value:function(e,t){var n=this.owner;if(n){var r=this.getMaxAchiever();r?r!==n&&this.getPlayerAchieveCount(r)>this.getPlayerAchieveCount(n)&&this.updateOwner(r):this.updateOwner(null)}}}]),t}();window.RegionalMonopolyAchievement=i,cc._RF.pop()},{}],RemoveCard:[function(e,t,n){"use strict";cc._RF.push(t,"2f96c/WyKNNC7hK+d5Oodnm","RemoveCard");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}var a=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,CardType.Remove));return e.name="\u62c6\u9664\u5361",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,luckyCard.BaseCard),r(t,[{key:"use",value:function(){var e=o(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.use4tile("\u8bf7\u5728\u6709\u5bf9\u624b\u623f\u5c4b\u7684\u5730\u5757\u8fdb\u884c\u62c6\u9664",t.tileFilter,n));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"displayUse",value:function(){var e=o(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"displayUse",this).call(this);case 2:r.removeBuilding();case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"toString",value:function(){return"\u62c6\u9664\u5361"}}],[{key:"tileFilter",value:function(e){return!e.isOrigin&&(e.owner&&e.owner!==game.hero)}}]),t}();luckyCard.RemoveCard=a,cc._RF.pop()},{}],ResourceMananger:[function(e,t,n){"use strict";cc._RF.push(t,"67fd5vkYhNLbpKapt3n1+VJ","ResourceMananger"),cc.Class({extends:cc.Component,onLoad:function(){game.resMgr=this,this.sfHeads={},this.sfBuildings={},this.avatars={};for(var e=1;e<=2;e++){var t=this.getSprite("head"+e);this.sfHeads[e]=t.spriteFrame;var n=this.getSprite("building"+e);this.sfBuildings[e]=n.spriteFrame;var r=this.getNodeByName("avatar"+e);this.avatars[e]=r}this.stateIcons={},this.stateIcons[PlayerState.Roll]=this.getSpriteFrame("imgState"+PlayerState.Roll),this.stateIcons[PlayerState.Card]=this.getSpriteFrame("imgState"+PlayerState.Card)},getBuildingSpriteFrame:function(e){return this.sfBuildings[e]},getHeadSpriteFrame:function(e){return this.sfHeads[e]},getAvatar:function(e){return this.avatars[e]},getStateIcon:function(e,t){return e===PlayerState.Build?this.getBuildingSpriteFrame(t):this.stateIcons[e]}}),cc._RF.pop()},{}],RollCmd:[function(e,t,n){"use strict";cc._RF.push(t,"20e12k2hetIiKC1Moqi+gZX","RollCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.map=ServerMap.getInstance(),e.netHandler=ServerNetHandler.getInstance(),e.playerMgr=ServerPlayerManager.getInstance(),e.gameController=ServerGameController.getInstance(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,serverCommand.BaseCommand),r(t,[{key:"execute",value:function(e){switch(e.type){case RollType.Rank:this.onRankRoll(e);break;case RollType.Action:this.onActionRoll(e);break;case RollType.Origin:this.onOriginRoll(e)}}},{key:"roll",value:function(){var e=gm.getDiceNum();return e>0?e>6?[6,e-6]:[1,e-1]:[utils.randomInt(1,6),utils.randomInt(1,6)]}},{key:"onRankRoll",value:function(e){var t=this.roll(e.testNum),n=this.playerMgr.getPlayer(e.playerId);spc("\u73a9\u5bb6"+n+"\u63b7\u9ab0\u5b50:"+t[0]+", "+t[1]),this.gameController.rankRollResult.push(t[0]+t[1]);var r=this.playerMgr.players;if(this.gameController.rankRollResult.length===r.length){var i=this.gameController.rankRollResult[0],o=this.gameController.rankRollResult[1];if(i===o)this.netHandler.sendRankRollResult(e.playerId,t,[1,1]),spc("\u9ab0\u5b50\u70b9\u6570\u76f8\u540c\uff0c\u91cd\u65b0\u63b7\u9ab0\u5b50\u5b9a\u987a\u5e8f"),this.gameController.enterPrepareStage();else{i<o&&(this.playerMgr.players=[r[1],r[0]]),spc("\u884c\u52a8\u987a\u5e8f\u4e3a:"+this.playerMgr.players[0]+", "+this.playerMgr.players[1]);var a=[this.playerMgr.players[0].id,this.playerMgr.players[1].id];this.netHandler.sendRankRollResult(e.playerId,t,a),this.gameController.startPrebuild()}}else this.netHandler.sendRankRollResult(e.playerId,t)}},{key:"tileBalance",value:function(e,t){var n=this.map.getTiles4Type(t.type);if(ServerAchievementManager.getInstance().hasRentBonus(t.type)){var r=constants.IndustryMonopolyRentBonus+constants.BaseRent;t.owner.changeCoin(r*n.length)}else for(var i=0;i<n.length;i++){var o=n[i];o.owner&&o.owner.changeCoin(20)}}},{key:"sendBuyCardTurn",value:function(){var e=this.playerMgr.currentPlayer.id,t=this.playerMgr.currentPlayer.getBuyCardCost();ServerCardManager.getInstance().hasCard()?this.netHandler.sendBuyCardTurn(e,t,!0):(this.netHandler.sendBuyCardTurn(e,t,!1),this.netHandler.sendUseCardTurn(e))}},{key:"onActionRoll",value:function(e){if(this.gameController.checkValidity(e)){var t=this.roll();spc("\u73a9\u5bb6"+this.playerMgr.currentPlayer+"\u63b7\u9ab0\u5b50:"+(t[0]+t[1]));var n=t[0]+t[1],r=this.playerMgr.getPlayer(e.playerId),i=this.map.getMoveResult(r.tile.idx,n),o=this.map.getTile(i),a=0;(t[0]+t[1])%2==1&&(a=ServerAchievementManager.getInstance().getDiceLuckyBonus(r))>0&&(console.log(r.name+" gain luck coin:"+a),r.changeCoin(a),InfluenceHandler.getInstance().broadcast()),r.enterTile(o),this.netHandler.sendActionRollResult(this.playerMgr.currentPlayer.id,t,i,a),o.isOrigin?(spc("\u73a9\u5bb6("+this.playerMgr.currentPlayer+")\u8fdb\u5165\u8d77\u70b9:"+o.idx),ServerCardManager.getInstance().hasCard()?this.netHandler.sendRollTurn(this.playerMgr.currentPlayer.id,RollType.Origin,!0):(this.netHandler.sendRollTurn(this.playerMgr.currentPlayer.id,RollType.Origin,!1),this.sendBuyCardTurn())):(spc("\u73a9\u5bb6"+this.playerMgr.currentPlayer+"\u8fdb\u5165\u5730\u5757:"+o.idx),this.tileBalance(r,o),InfluenceHandler.getInstance().broadcast(),this.sendBuyCardTurn())}}},{key:"onOriginRoll",value:function(e){var t=this.roll();spc("\u73a9\u5bb6"+this.playerMgr.currentPlayer+"\u63b7\u9ab0\u5b50:"+(t[0]+t[1]));var n=t[0]+t[1],r=this.playerMgr.getPlayer(e.playerId),i=null;if(n<=2*r.usedCardCount+1){var o=ServerCardManager.getInstance().draw();r.gainCard(o),i=o.type}this.netHandler.sendOriginRollResult(r.id,t,i),this.sendBuyCardTurn()}}]),t}();window.serverCommand=window.serverCommand||{},window.serverCommand.RollCmd=i,cc._RF.pop()},{}],RollResultCmd:[function(e,t,n){"use strict";cc._RF.push(t,"d85c03LpU9OpLbWkLljcdVM","RollResultCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=void 0,game.controler.getPlayer(t.playerId).updateState(PlayerState.None),e.t0=t.type,e.next=e.t0===RollType.Rank?6:e.t0===RollType.Action?8:e.t0===RollType.Origin?10:12;break;case 6:return n=new cmd.RankRollResultCmd,e.abrupt("break",12);case 8:return n=new cmd.ActionRollResultCmd,e.abrupt("break",12);case 10:return n=new cmd.OriginRollResultCmd,e.abrupt("break",12);case 12:return e.next=14,n.execute(t);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"unitTest",value:function(e,t,n,r){var i={type:e,playerId:t,dice:n,rank:r};return(new cmd.RollResultCmd).execute(i)}}]),t}();window.cmd=window.cmd||{},window.cmd.RollResultCmd=i,cc._RF.pop()},{}],RollTurnCmd:[function(e,t,n){"use strict";cc._RF.push(t,"f4e29ZQhS9FtJLblMACrFoK","RollTurnCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:game.controler.setHero(t.playerId),n=void 0,e.t0=t.type,e.next=e.t0===RollType.Rank?5:e.t0===RollType.Action?7:e.t0===RollType.Origin?9:11;break;case 5:return n=new cmd.RankRollTurnCmd,e.abrupt("break",11);case 7:return n=new cmd.ActionRollTurnCmd,e.abrupt("break",11);case 9:return n=new cmd.OriginRollTurnCmd,e.abrupt("break",11);case 11:return e.next=13,n.execute(t);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"unitTest",value:function(e,n){game.controler.setHero(n);var r={playerId:n,type:e};return(new t).execute(r)}}]),t}();window.cmd=window.cmd||{},window.cmd.RollTurnCmd=i,cc._RF.pop()},{}],RoomGameStartCmd:[function(e,t,n){"use strict";cc._RF.push(t,"ab8b1enn8JEwoOQOy7T2wMX","RoomGameStartCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,serverCommand.BaseCommand),r(t,[{key:"execute",value:function(e){console.log("server:game start");var t=this.initGame();spc("\u6e38\u620f\u5f00\u59cb"),ServerNetHandler.getInstance().sendGameStart(t),ServerGameController.getInstance().enterPrepareStage()}},{key:"initGame",value:function(){return{players:ServerPlayerManager.getInstance().init(),tiles:ServerMap.getInstance().init(),card:ServerCardManager.getInstance().init()}}}]),t}();window.serverCommand=window.serverCommand||{},window.serverCommand.RoomGameStartCmd=i,cc._RF.pop()},{}],RoundActionCmd:[function(e,t,n){"use strict";cc._RF.push(t,"38aed7bhaFDC4f3uIFCf04v","RoundActionCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.netHandler=ServerNetHandler.getInstance(),e.playerMgr=ServerPlayerManager.getInstance(),e.gameController=ServerGameController.getInstance(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,serverCommand.BaseCommand),r(t,[{key:"execute",value:function(e){if(this.gameController.checkValidity(e))switch(e.type){case ActionType.BuyCard:this.onBuyCard(e);break;case ActionType.Build:this.onBuild(e);break;case ActionType.UseCard:this.onUseCard(e)}}},{key:"onBuyCard",value:function(e){if(e.take){var t=this.playerMgr.getPlayer(e.playerId),n=ServerCardManager.getInstance().draw();t.buyCard(n),InfluenceHandler.getInstance().broadcast(),this.netHandler.sendBuyCardResult(e.playerId,!0,n.type,t.getBuyCardCost())}else this.netHandler.sendBuyCardResult(e.playerId,!1);this.netHandler.sendUseCardTurn(e.playerId)}},{key:"onUseCard",value:function(e){var t=this.playerMgr.getPlayer(e.playerId);if(e.take){console.log("use card type:"+e.cardType);var n=t.useCard(e.cardType);if(n){if(spc("\u73a9\u5bb6"+t+"\u4f7f\u7528\u5361\u7247:"+n),e.tileIdx>=0){var r=ServerMap.getInstance().getTile(e.tileIdx);n.use(t,r)}else n.use(t);this.netHandler.sendUseCardResult(t.id,!0,n.type,e.tileIdx),ServerAchievementManager.getInstance().checkPlayerAchievements(t),InfluenceHandler.getInstance().broadcast()}else cc.error("use card error")}else this.netHandler.sendUseCardResult(e.playerId,!1);if(!ServerGameController.getInstance().checkGameOver()){var i=ServerAchievementManager.getInstance().getBuildDiscount(t);this.netHandler.sendBuildTurn(e.playerId,i)}}},{key:"onBuild",value:function(e){if(e.take){var t=this.playerMgr.getPlayer(e.playerId),n=t.tile;spc("\u73a9\u5bb6"+t+"\u5efa\u9020\u623f\u5c4b\u5728\u5730\u5757:"+n.idx),n.build(t),this.netHandler.sendBuildResult(t.id,!0,n.getBuildCost(t)),InfluenceHandler.getInstance().broadcast()}else this.netHandler.sendBuildResult(e.playerId,!1);ServerGameController.getInstance().checkGameOver()||this.nextPlayerRound()}},{key:"nextPlayerRound",value:function(){this.playerMgr.nextPlayerTurn(),console.log("--------------------new round, player:"+this.playerMgr.currentPlayer.id+"--------------------"),spc("--------------\u8f6e\u5230\u73a9\u5bb6\u884c\u52a8\uff1a"+this.playerMgr.currentPlayer+"-----------------"),this.netHandler.sendRollTurn(this.playerMgr.currentPlayer.id)}}]),t}();window.serverCommand=window.serverCommand||{},window.serverCommand.RoundActionCmd=i,cc._RF.pop()},{}],RoundActionResultCmd:[function(e,t,n){"use strict";cc._RF.push(t,"92dd93K3ARCg5RNg6rFeBCV","RoundActionResultCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(e){game.controler.setHero(e.playerId);var t=void 0;switch(e.type){case ActionType.BuyCard:t=new cmd.BuyCardResultCmd;break;case ActionType.UseCard:t=new cmd.UseCardResultCmd;break;case ActionType.Build:t=new cmd.BuildResultCmd}return t.execute(e)}}]),t}();window.cmd=window.cmd||{},window.cmd.RoundActionResultCmd=i,cc._RF.pop()},{}],RoundActionTurnCmd:[function(e,t,n){"use strict";cc._RF.push(t,"4799f23DU9NUKxbB1VIzbbR","RoundActionTurnCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(e){this.setHero(e.playerId);var t=void 0;switch(e.type){case ActionType.BuyCard:t=new cmd.BuyCardTurnCmd;break;case ActionType.UseCard:t=new cmd.UseCardTurnCmd;break;case ActionType.Build:t=new cmd.BuildTurnCmd}return t.execute(e)}}]),t}();window.cmd=window.cmd||{},window.cmd.RoundActionTurnCmd=i,cc._RF.pop()},{}],SeizeCard:[function(e,t,n){"use strict";cc._RF.push(t,"30741F0Z9hNPageDtGxvJsw","SeizeCard");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}var a=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,CardType.Seize));return e.name="\u5f3a\u5360\u5361",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,luckyCard.BaseCard),r(t,[{key:"use",value:function(){var e=o(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.use4tile("\u8bf7\u5728\u6709\u5bf9\u624b\u623f\u5c4b\u7684\u5730\u5757\u8fdb\u884c\u62c6\u9664",t.tileFilter,n));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"displayUse",value:function(){var e=o(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"displayUse",this).call(this);case 2:return r.removeBuilding(),e.next=5,n.build(r);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"toString",value:function(){return"\u5f3a\u5360\u5361\u63cf\u8ff0"}}],[{key:"tileFilter",value:function(e){return!e.isOrigin&&e.owner!==game.hero}}]),t}();luckyCard.SeizeCard=a,cc._RF.pop()},{}],SelectOriginCmd:[function(e,t,n){"use strict";cc._RF.push(t,"c833cxb4/xAeJ5IlkiMl8di","SelectOriginCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,serverCommand.BaseCommand),r(t,[{key:"execute",value:function(e){var t=ServerPlayerManager.getInstance(),n=t.getPlayer(e.playerId),r=ServerMap.getInstance().getTile(e.tileIdx);n.enterTile(r),spc("\u73a9\u5bb6"+n+"\u9009\u62e9\u8d77\u70b9:"+e.tileIdx),ServerNetHandler.getInstance().sendSelectOriginResult(t.currentPlayer.id,r.idx);for(var i=t.players,o=!0,a=0;a<i.length;a++){if(!i[a].tile){o=!1;break}}o?ServerGameController.getInstance().enterRoundActionStage():(t.nextPlayerTurn(),ServerNetHandler.getInstance().sendSelectOriginTurn(t.currentPlayer.id))}}]),t}();window.serverCommand=window.serverCommand||{},window.serverCommand.SelectOriginCmd=i,cc._RF.pop()},{}],SelectOriginResultCmd:[function(e,t,n){"use strict";cc._RF.push(t,"a0808JRrWlISpXfPpeM8FZ8","SelectOriginResultCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=game.controler.getPlayer(t.playerId),r=game.map.getTile(t.tileIdx),n.enterTile(r),!t.over){e.next=6;break}return e.next=6,game.winConditionTipsView.show();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"unitTest",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={msgType:NetMsgType.S2CSelectOriginResult,playerId:e,tileIdx:t,over:n};game.netHandler.onSequenceMsg(r)}}]),t}();window.cmd=window.cmd||{},window.cmd.SelectOriginResultCmd=i,cc._RF.pop()},{}],SelectOriginTurnCmd:[function(e,t,n){"use strict";cc._RF.push(t,"55289sGpiBNrIDLy7KeI22Q","SelectOriginTurnCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"showOriginSelectTipsView",value:function(){return new Promise(function(e){game.originSelectView.show(game.hero.name+game.i18n.origin_select_self,game.i18n.origin_select_tips,function(){game.tileSelector.hide();var t=10*utils.randomInt(0,3),n=game.map.getTile(t);e(n)})})}},{key:"tileFilter",value:function(e){return e.isOrigin}},{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(game.controler.showAchievementTips(!1),game.controler.setHero(t.playerId),!this.gmTest(t.playerId)){e.next=4;break}return e.abrupt("return");case 4:if(game.controler.isHero(t.playerId)){e.next=7;break}return game.originSelectView.show(game.i18n.origin_select_others,""),e.abrupt("return",Promise.resolve());case 7:return n=this.showOriginSelectTipsView(),r=game.tileSelector.getSelectTile(this.tileFilter),e.next=11,Promise.race([n,r]);case 11:return i=e.sent,game.originSelectView.hide(),game.netHandler.selectOrigin(i.idx),console.log("select origin:"+i.idx),e.abrupt("return",Promise.resolve(i.idx));case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"gmTest",value:function(e){if(gm.origin&&void 0!==gm.origin[e])return game.netHandler.selectOrigin(gm.origin[e]),!0}}],[{key:"unitTest",value:function(e){var t={msgType:NetMsgType.S2CSelectOriginTurn,playerId:e};game.netHandler.onSequenceMsg(t)}}]),t}();window.cmd=window.cmd||{},window.cmd.SelectOriginTurnCmd=i,cc._RF.pop()},{}],SequenceController:[function(e,t,n){"use strict";cc._RF.push(t,"6e295RsB35LHZq/Z+CV+0Jq","SequenceController");var r=cc.Class({ctor:function(){this.actionDataList=[],this.acting=!1,this.actionFinishedListener=this.onActionFinished.bind(this)},push:function(e){this.actionDataList.push(e),this.peek()},onActionFinished:function(){this.acting=!1,this.peek()},reset:function(){this.acting=!1,this.actionDataList=[]},peek:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.acting&&0!==this.actionDataList.length){e.next=2;break}return e.abrupt("return");case 2:return this.acting=!0,t=this.actionDataList.shift(),e.next=6,this.executeAction(t);case 6:gm.checkPlayerDataSync(),this.acting=!1,this.peek();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),setExecutor:function(e){this.executeAction=e}});t.exports=r,cc._RF.pop()},{}],ServerAchievementManager:[function(e,t,n){"use strict";cc._RF.push(t,"efd6bzBml5KB7/xDbNiByqm","ServerAchievementManager");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.initAchievements(),this.playerMgr=ServerPlayerManager.getInstance()}return r(e,[{key:"initAchievements",value:function(){this.collectivizeAchievement=new CollectivizeAchievement(AchievementType.Collectivize),this.speculatorAchievement=new SpeculatorAchievement(AchievementType.Speculator);var e=ServerMap.getInstance();this.regionalMonopolys={};for(var t=0;t<4;t++){var n=e.getRegionTiles(t),r=new RegionalMonopolyAchievement(AchievementType.RegionalMonopoly,n);this.regionalMonopolys[t]=r}this.industryMonopolys={};for(var i=1;i<=8;i++){var o=e.getTiles4Type(i),a=new IndustryMonopolyAchievement(AchievementType.IndustryMonopoly,o);this.industryMonopolys[i]=a}}},{key:"checkTileAchievements",value:function(e,t){this.collectivizeAchievement.checkTile(e,t),this.regionalMonopolys[e.region].checkTile(e,t),this.industryMonopolys[e.type].checkTile(e,t)}},{key:"checkPlayerAchievements",value:function(e){this.speculatorAchievement.check(e)}},{key:"getIndustryMonopolyAchiever",value:function(e){return this.industryMonopolys[e].owner}},{key:"hasRentBonus",value:function(e){return!(e!==TileType.Red&&e!==TileType.Blue||!this.getIndustryMonopolyAchiever(e))}},{key:"getBuildDiscount",value:function(e){var t=0;return this.getIndustryMonopolyAchiever(TileType.Orange)===e&&(t+=constants.BuildDiscount),this.getIndustryMonopolyAchiever(TileType.Green)===e&&(t+=constants.BuildDiscount),t}},{key:"hasBuyCardDiscount",value:function(e){return this.getIndustryMonopolyAchiever(TileType.Yellow)===e||this.getIndustryMonopolyAchiever(TileType.Pink)===e}},{key:"getDiceLuckyBonus",value:function(e){var t=0;return this.getIndustryMonopolyAchiever(TileType.White)===e&&(t+=constants.LuckRollBonus),this.getIndustryMonopolyAchiever(TileType.Gray)===e&&(t+=constants.LuckRollBonus),t}}],[{key:"getInstance",value:function(){return e.ins||(e.ins=new e),e.ins}}]),e}();window.ServerAchievementManager=i,t.exports=i,cc._RF.pop()},{}],ServerConstants:[function(e,t,n){"use strict";cc._RF.push(t,"afa8cpvg8ZHerXFOmGTnh77","ServerConstants");window.ServerConstants={InitPlayerCoin:200,CardCost:40,MinTileCount:1,TileTypeCount:8,TileCount:40,GameOverCupCount:10},window.ServerGameStage={Prepare:0,RoundAction:1,End:2},window.LocalServerNetEvent={Client2Server:"local_server_net_event_c2s",Server2Client:"local_server_net_event_s2c"},cc._RF.pop()},{}],ServerGameController:[function(e,t,n){"use strict";cc._RF.push(t,"18b5d5UuMpIrLHgu4kVEAI8","ServerGameController");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.netHandler=ServerNetHandler.getInstance(),this.playerMgr=ServerPlayerManager.getInstance()}return r(e,[{key:"prepareNextStep",value:function(){var e=this.playerMgr.players,t=this.prebuildData[e[0].id],n=this.prebuildData[e[1].id];if(console.log("c1:"+t+", c2:"+n),2===n&&t===n)return this.rankRollResult=null,this.prebuildData=null,void this.startSelectOrigin();this.playerMgr.currentPlayer=e[0],1===t&&n<2&&(this.playerMgr.currentPlayer=e[1]);var r=this.prebuildData[this.playerMgr.currentPlayer.id];this.netHandler.sendPrebuildTurn(this.playerMgr.currentPlayer.id,r)}},{key:"handlePrebuild",value:function(e){this.prebuildData[e]+=1,this.prepareNextStep()}},{key:"enterPrepareStage",value:function(){console.log("enter prepare stage!"),this.gameStage=ServerGameStage.Prepare,this.rankRollResult=[];var e=this.playerMgr.players;this.netHandler.sendRollTurn(e[0].id,RollType.Rank)}},{key:"enterRoundActionStage",value:function(){console.log("enter round action stage!"),this.gameStage=ServerGameStage.RoundAction,this.playerMgr.initPlayerTurn(),this.netHandler.sendRollTurn(this.playerMgr.currentPlayer.id)}},{key:"startPrebuild",value:function(){this.prebuildData={};var e=this.playerMgr.players;this.prebuildData[e[0].id]=0,this.prebuildData[e[1].id]=0,this.prepareNextStep()}},{key:"startSelectOrigin",value:function(){this.playerMgr.initPlayerTurn(),this.netHandler.sendSelectOriginTurn(this.playerMgr.currentPlayer.id)}},{key:"checkValidity",value:function(e){return e.playerId===this.playerMgr.currentPlayer.id||(cc.error("\u73a9\u5bb6\u4e0d\u5339\u914d!"),!1)}},{key:"checkGameOver",value:function(){for(var e=null,t=this.playerMgr.players,n=0;n<t.length;n++){var r=t[n];if(r.cup>=constants.GameOverCupCount){e=r;break}}return!!e&&(ServerNetHandler.getInstance().sendGameOver(e.id),!0)}}],[{key:"getInstance",value:function(){return e.ins||(e.ins=new e),e.ins}}]),e}();window.ServerGameController=i,cc._RF.pop()},{}],ServerTemplateCmd:[function(e,t,n){"use strict";cc._RF.push(t,"1e28dODYzlHaoGTbir2NZeg","ServerTemplateCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,serverCommand.BaseCommand),r(t,[{key:"execute",value:function(e){}}]),t}();window.serverCommand=window.serverCommand||{},window.serverCommand.Cmd=i,cc._RF.pop()},{}],SpeculatorAchievement:[function(e,t,n){"use strict";cc._RF.push(t,"58eaaujK4RF8L3u+kIMB1Tw","SpeculatorAchievement");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ServerAchievement),r(t,[{key:"check",value:function(e){var t=this.owner;if(e!==t&&e.usedCardCount>=constants.SpeculatorCount){if(t&&t.usedCardCount>=e.usedCardCount)return;this.updateOwner(e)}}}]),t}();window.SpeculatorAchievement=i,cc._RF.pop()},{}],TestClientNetHandler:[function(e,t,n){"use strict";cc._RF.push(t,"80ca1JnFlBFt7K0sGDGigAe","TestClientNetHandler");var r={roll:function(e){this.sendMsg(NetMsgType.C2SRoll,{type:e})},prebuild:function(e){this.sendMsg(NetMsgType.C2SPrebuild,{tileIdx:e})},build:function(e){this.sendMsg(NetMsgType.C2SAction,{type:ActionType.Build,take:e})},buyCard:function(e,t){this.sendMsg(NetMsgType.C2SAction,{type:ActionType.BuyCard,take:e,testCardType:t})},useCard:function(e,t,n){this.sendMsg(NetMsgType.C2SAction,{type:ActionType.UseCard,take:e,cardType:t,tileIdx:n})},selectOrigin:function(e){this.sendMsg(NetMsgType.C2SSelectOrigin,{tileIdx:e})},init:function(){game.netHandler=this,game.eventManager.on(LocalServerNetEvent.Server2Client,this.onMsg.bind(this)),this.msgType2Cmd={},this.msgListeners={},this.enableSequenceMsg()},registerMsgCommand:function(e,t){t&&(this.msgType2Cmd[e]=t)},registerMsgListener:function(e,t){t&&(this.msgListeners[e]=t)},sendMsg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.msgType=e,t.playerId=game.hero.id,console.log("###client send : "+JSON.stringify(t)),game.eventManager.fire(LocalServerNetEvent.Client2Server,t)},onMsg:function(e){var t=this.msgListeners[e.msgType];if(t)t(e);else{var n=this.msgType2Cmd[e.msgType];if(n)(new n).execute(e);else console.log("no comman for:"+e.msgType)}},enableSequenceMsg:function(){var t=e("SequenceController");this.sequenceController=new t,this.sequenceController.setExecutor(this.dispatchSequenceMsg.bind(this)),this.smListener=this.onSequenceMsg.bind(this),this.smType2Command={}},reset:function(){this.sequenceController.reset()},registerSequenceMsgCommand:function(e,t){this.smType2Command[e]||(this.registerMsgListener(e,this.smListener),this.smType2Command[e]=t)},onSequenceMsg:function(e){this.sequenceController.push(e)},dispatchSequenceMsg:function(e){var t=this.smType2Command[e.msgType];if(t){var n=new t;return console.log("excute command, data:"+JSON.stringify(e)),n.execute(e)}console.log("no command:"+JSON.stringify(e))}};t.exports=r,cc._RF.pop()},{SequenceController:"SequenceController"}],TestCmd:[function(e,t,n){"use strict";cc._RF.push(t,"92c76zj4pBM17sYuhARvSwG","TestCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(t){function n(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return game.hero={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,serverCommand.BaseCommand),r(n,[{key:"setHero",value:function(e){game.hero={id:e}}},{key:"execute",value:function(t){var n=e("TestClientNetHandler");this.setHero(2),n.roll(RollType.Rank,7),this.setHero(1),n.roll(RollType.Rank,3),this.setHero(1),n.prebuild(4),this.setHero(2),n.prebuild(1),this.setHero(2),n.prebuild(2),this.setHero(1),n.prebuild(3),this.setHero(1),n.selectOrigin(0),this.setHero(2),n.selectOrigin(10),this.setHero(1),n.roll(RollType.Action,7);var r=CardType.House;gm.setCardType(r),n.buyCard(!0),n.useCard(!0,r,35),n.build(!0);var i=ServerPlayerManager.getInstance().players;console.log(i[0].coin,i[1].coin)}}]),n}();window.serverCommand=window.serverCommand||{},window.serverCommand.TestCmd=i,cc._RF.pop()},{TestClientNetHandler:"TestClientNetHandler"}],TestServerNetHandler:[function(e,t,n){"use strict";cc._RF.push(t,"d5318m1bFpNUpgQptyQ0p9U","TestServerNetHandler");var r={init:function(){this.msgListeners={},this.msgType2Cmd={},game.eventManager.on(LocalServerNetEvent.Client2Server,this.onMsg.bind(this))},registerMsgCommand:function(e,t){t&&(this.msgType2Cmd[e]=t)},registerMsgListener:function(e,t){t&&(this.msgListeners[e]=t)},sendMsg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.msgType=e,console.log("###server send : "+JSON.stringify(t)),game.eventManager.fireSync(LocalServerNetEvent.Server2Client,t)},onMsg:function(e){console.log("&&&server recieve: "+JSON.stringify(e));var t=this.msgListeners[e.msgType];t&&t(e);var n=this.msgType2Cmd[e.msgType];n?(new n).execute(e):console.log("no command:"+JSON.stringify(e))},sendGameStart:function(e){this.sendMsg(NetMsgType.S2CGameStart,e)},sendGameOver:function(e){this.sendMsg(NetMsgType.S2CGameOver,{winnerId:e})},sendRollTurn:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:RollType.Action,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.sendMsg(NetMsgType.S2CRollTurn,{playerId:e,type:t,hasCard:n})},sendRankRollResult:function(e,t,n){this.sendMsg(NetMsgType.S2CRollResult,{type:RollType.Rank,playerId:e,dice:t,rank:n})},sendActionRollResult:function(e,t,n,r){this.sendMsg(NetMsgType.S2CRollResult,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({type:RollType.Action,playerId:e,dice:t,tileIdx:n,luckCoin:r},"luckCoin",r))},sendOriginRollResult:function(e,t,n){this.sendMsg(NetMsgType.S2CRollResult,{type:RollType.Origin,playerId:e,dice:t,cardType:n})},sendPrebuildTurn:function(e,t){this.sendMsg(NetMsgType.S2CPrebuildTurn,{playerId:e,index:t})},sendPrebuildResult:function(e,t,n){this.sendMsg(NetMsgType.S2CPrebuildResult,{playerId:e,tileIdx:t,cost:n})},sendBuyCardTurn:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.sendMsg(NetMsgType.S2CActionTurn,{playerId:e,type:ActionType.BuyCard,cost:t,hasCard:n})},sendUseCardTurn:function(e){this.sendMsg(NetMsgType.S2CActionTurn,{playerId:e,type:ActionType.UseCard})},sendBuildTurn:function(e,t){this.sendMsg(NetMsgType.S2CActionTurn,{playerId:e,type:ActionType.Build,discount:t})},sendBuildResult:function(e,t,n){this.sendMsg(NetMsgType.S2CActionResult,{type:ActionType.Build,playerId:e,take:t,cost:n})},sendBuyCardResult:function(e,t,n,r){this.sendMsg(NetMsgType.S2CActionResult,{type:ActionType.BuyCard,playerId:e,take:t,cardType:n,cost:r})},sendUseCardResult:function(e,t,n,r){this.sendMsg(NetMsgType.S2CActionResult,{playerId:e,type:ActionType.UseCard,take:t,cardType:n,tileIdx:r})},sendSelectOriginTurn:function(e){this.sendMsg(NetMsgType.S2CSelectOriginTurn,{playerId:e})},sendSelectOriginResult:function(e,t){this.sendMsg(NetMsgType.S2CSelectOriginResult,{playerId:e,tileIdx:t})},sendAchievementChange:function(e){this.sendMsg(NetMsgType.S2CAchievementChange,{changeList:e})},getInstance:function(){return this}};window.ServerNetHandler=r,t.exports=r,cc._RF.pop()},{}],TileCardUseView:[function(e,t,n){"use strict";cc._RF.push(t,"d0fcfPZAMdGiK3sMoD4H3/5","TileCardUseView"),cc.Class({extends:cc.Component,onLoad:function(){this.cd=this.getNodeByName("cd").getComponent("CountdownHandler"),this.addClickListener("btnCancel",this.onBtnCancel,this),this.hide()},show:function(e,t,n,r){var i=this;this.getLabel("lbTips").string=e,this.node.active=!0,this.cd.startCount(t,function(){i.hide(),r&&r()}),this.onCancel=n},onBtnCancel:function(){this.onCancel&&this.onCancel(this.cd.getTime()),this.onCancel=null,this.hide()},hide:function(){this.cd.clear(),this.node.active=!1}}),cc._RF.pop()},{}],TileImageInfo:[function(e,t,n){"use strict";cc._RF.push(t,"74d81yW1BpE75iVj5UIiIV/","TileImageInfo"),t.exports={game_map_tile_light1:{width:168,height:107,pixels:"000000000000000000000000000000000000000000000000000000000000000000111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001100000000000000000000000000000000000000000000000000000000000"},game_map_tile_light2:{width:162,height:109,pixels:"000000000000000000000000000000000000000000000001100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111000000000000000000000000000000000000"},game_map_origin_light:{width:203,height:130,pixels:"00000000000000000000000000000000000000000000000000000000000000000001110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111000000000000000000000000000000000000000000000000000000000"}},cc._RF.pop()},{}],TileSelector:[function(e,t,n){"use strict";cc._RF.push(t,"8bd4fCue6NA5YTh55zdvjE4","TileSelector"),cc.Class({extends:cc.Component,onLoad:function(){game.tileSelector=this},init:function(){this.initTouchEvents(),this.tiles=game.map.tiles},initTouchEvents:function(){this.callback=null,this.node.active=!1,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},getSelectTile:function(e){var t=this;return this.showSelectableTiles(e),this.node.active=!0,new Promise(function(e){t.callback=e})},showSelectableTiles:function(e){this.tileFilter=e,this.selectableTiles=this.tiles.filter(e),this.selectableTiles.map(function(e){return e.showSelectable(!0)})},hide:function(){this.node.active=!1,this.clear()},clear:function(){this.callback=null,this.selectableTiles&&this.selectableTiles.map(function(e){return e.showSelectable(!1)})},selectResult:function(e){this.node.active=!1,console.log("tile selector:select result"),this.callback&&this.callback(e),this.clear()},onTouchStart:function(e){var t=e.getLocation(),n=t.x-cc.visibleRect.center.x,r=t.y-cc.visibleRect.center.y,i=0,o=0;n>=0?r>=0?(i=0,o=10):(i=10,o=20):r>=0?(i=30,o=40):(i=20,o=30);for(var a=i;a<=o;a++){var c=a%40,u=this.tiles[c];if(this.tileFilter(u)&&u.contains(t))return void this.selectResult(u)}}}),cc._RF.pop()},{}],Tile:[function(e,t,n){"use strict";cc._RF.push(t,"42affT0j+xKR7HVGH5NhDDI","Tile"),cc.Class({extends:cc.Component,onLoad:function(){this.buildCost=0,this.hasBlock=!1,this.owner=null,this.ptWorld=this.node.convertToWorldSpaceAR(cc.v2(0,0)),this.initObjs(),this.deactiveNode("imgBuilding"),this.deactiveNode("imgBlock"),this.getLabel("lbIndex").string=this.node.name.substr(4),this.activeNode("lbIndex")},initObjs:function(){this.objs=this.getNodeByName("objs"),this.standNode=this.getNodeByName("stand"),this.getSprite("stand").spriteFrame=null,this.ptObjs=this.objs.getPosition();var e=this.getNodeByName("light"),t=this.node.convertToWorldSpaceAR(this.ptObjs);this.ptObjsPressedNode=e.convertToNodeSpaceAR(t)},init:function(e,t,n){this.idx=e,this.type=t,this.buildCost=n,this.setOwner(null),this.hasBlock=!1,this.updateBlockState(),this.updateTileLook(),this.showSelectable(!1)},isBuildable:function(){return null===this.owner},updateTileLook:function(){this.getNodeByName("bg").color=Type2Color[this.type]},updateBlockState:function(){this.getNodeByName("imgBlock").active=this.hasBlock},addBlock:function(){this.hasBlock=!0,this.updateBlockState()},removeBlock:function(){this.hasBlock=!1,this.updateBlockState()},setOwner:function(e){this.owner=e;var t=this.getSprite("imgBuilding");e?(t.node.active=!0,this.getSprite("imgBuilding").spriteFrame=game.resMgr.getBuildingSpriteFrame(e.id)):t.node.active=!1},build:function(e){this.setOwner(e)},removeBuilding:function(){this.owner&&this.owner.removeBuilding(this),this.setOwner(null)},showSelectable:function(e){var t=this.getNodeByName("light");if(e){t.active=!0;var n=[];t.opacity=0,n.push(cc.fadeTo(.5,200)),n.push(cc.fadeTo(.5,0)),t.runAction(cc.repeatForever(cc.sequence(n)))}else t.stopAllActions(),t.active=!1},balance:function(e){var t=this;return new Promise(function(n){var r=t.getNodeByName("light");r.active=!0;var i=[];r.opacity=0,i.push(cc.fadeTo(.2,200)),i.push(cc.fadeTo(.2,0)),i.push(cc.fadeTo(.2,200)),i.push(cc.fadeTo(.2,0)),i.push(cc.callFunc(function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.owner.gainCoin(t.ptWorld,e);case 2:n(),r.active=!1;case 4:case"end":return i.stop()}},i,t)})))),r.runAction(cc.sequence(i))})},standPlayer:function(e){var t=e.avatar;t.node.setPosition(0,0),t.node.parent=this.standNode},showObjs:function(e,t){this.objs.parent.active=!1,this.objs.parent=e,e.active=!0,this.objs.setPosition(t)},stepOn:function(e){var t=this;return new Promise(function(n){var r=t.getNodeByName("bg");t.standPlayer(e);var i=t.getNodeByName("pressed");i.color=r.color,t.showObjs(i,t.ptObjsPressedNode);var o=[];o.push(cc.delayTime(.15)),o.push(cc.callFunc(function(){t.showObjs(r,t.ptObjs),n()})),t.node.runAction(cc.sequence(o))})},contains:function(e){var t=this.getNodeByName("light");if(!this.containPixels){var n=t.getComponent(cc.Sprite).spriteFrame.name;this.containPixels=game.imagePixelsMap[n]}var r=t.convertToNodeSpace(e),i=Math.floor(r.x),o=Math.floor(r.y);return!(i<0||i>=t.width||o<0||o>=t.height)&&this.containPixels[i][o]}}),cc._RF.pop()},{}],TipsView:[function(e,t,n){"use strict";cc._RF.push(t,"9b64a/Y5YxLfJWMUOkSCvHB","TipsView"),cc.Class({extends:cc.Component,onLoad:function(){this.lbTips=this.getLabel("lbTips"),this.hide()},show:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.node.active=!0,this.lbTips.string=e,this.getNodeByName("imgTipsTray").width=this.lbTips.node.width+100,new Promise(function(e){t.scheduleOnce(function(){t.hide(),e()},n)})},hide:function(){this.node.active=!1}}),cc._RF.pop()},{}],UnbuildableTipsView:[function(e,t,n){"use strict";cc._RF.push(t,"ccca10o+fFKA6ZTOwlTuCeM","UnbuildableTipsView"),cc.Class({extends:cc.Component,onLoad:function(){this.hide()},show:function(e,t){var n=this,r=this.getNodeByName("imgTile");return e.isOrigin?(this.setLabel("lbTIps",game.i18n.build_confirm_origin_tips),r.active=!1,this.getLabel("lbCount").string=""):(e.owner?this.setLabel("lbTIps",game.i18n.build_confirm_tips_owned):this.setLabel("lbTIps",game.i18n.build_confirm_tips_insufficient.format(t)),r.active=!0,r.color=Type2Color[e.type],this.getLabel("lbCount").string="x"+game.map.getTiles4Type(e.type).length),new Promise(function(e){n.node.active=!0;var t=[];t.push(cc.delayTime(2)),t.push(cc.callFunc(e)),t.push(cc.callFunc(n.hide,n)),n.node.runAction(cc.sequence(t))})},hide:function(){this.node.active=!1}}),cc._RF.pop()},{}],UnitTestCmd:[function(e,t,n){"use strict";cc._RF.push(t,"0d6acq0WsZFLqT4sbiRM4R5","UnitTestCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}var o=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return game.singlePlay=!0,game.test1=e.test1.bind(e),game.test2=e.test2.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=i(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gameStart();case 2:return game.tileSelector.getSelectTile(function(){return!0}),e.abrupt("return");case 6:return e.next=8,cmd.SelectOriginResultCmd.unitTest(2,30);case 8:return t=game.contavatarr.getPlayer(1),n=t.getStandTile().idx+9,e.next=12,game.map.movePlayerTo(t,n);case 12:return n%=constants.TileCount,t.enterTile(game.map.getTile(n)),console.log("over"),e.abrupt("return");case 18:return e.next=20,this.buyCard(1,CardType.Remove);case 20:return r=[{type:AchievementType.IndustryMonopoly,subType:1,ownerId:1},{type:AchievementType.Collectivize,subType:0,ownerId:1},{type:AchievementType.Speculator,subType:0,ownerId:1}],e.next=23,cmd.AchievementChangeCmd.unitTest(r);case 23:return e.next=25,this.build();case 25:return e.next=27,this.gameOver();case 27:console.log("over");case 28:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"gameOver",value:function(){var e=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:cmd.GameOverCmd.unitTest(1);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"build",value:function(){var e=i(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cmd.BuildTurnCmd.unitTest(1,40);case 2:return t=e.sent,e.next=5,cmd.BuildResultCmd.unitTest(1,t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"useCard",value:function(){var e=i(regeneratorRuntime.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;arguments[2];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=null!==r,cmd.UseCardTurnCmd.unitTest(t,n);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"buyCard",value:function(){var e=i(regeneratorRuntime.mark(function e(t){var n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null!==i,e.next=3,cmd.BuyCardTurnCmd.unitTest(t,n);case 3:return r=e.sent,e.next=6,cmd.BuyCardResultCmd.unitTest(t,r,i);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"originRoll",value:function(){var e=i(regeneratorRuntime.mark(function e(t,n,r,i){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("originRoll"),e.next=3,cmd.OriginRollTurnCmd.unitTest(t);case 3:return e.next=5,cmd.OriginRollResultCmd.unitTest(t,n,r,i);case 5:console.log("originRoll end");case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"roundActionRoll",value:function(){var e=i(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("roundActionRoll"),e.next=3,cmd.ActionRollTurnCmd.unitTest(t);case 3:return r=game.contavatarr.getPlayer(t),i=r.getStandTile().idx+n[0]+n[1],e.next=7,cmd.ActionRollResultCmd.unitTest(t,i,n);case 7:console.log("roundActionRoll end");case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"selectOrigin",value:function(){var e=i(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t[0],e.next=3,cmd.SelectOriginTurnCmd.unitTest(n);case 3:return r=e.sent,e.next=6,cmd.SelectOriginResultCmd.unitTest(n,r);case 6:return n=t[1],e.next=9,cmd.SelectOriginTurnCmd.unitTest(n);case 9:return r=e.sent,e.next=12,cmd.SelectOriginResultCmd.unitTest(n,r,!0);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"prepareBuild",value:function(){var e=i(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cmd.PrebuildTurnCmd.unitTest(2);case 2:return t=e.sent,e.next=5,cmd.PrebuildResultCmd.unitTest(2,t);case 5:return e.next=7,cmd.PrebuildTurnCmd.unitTest(1);case 7:return t=e.sent,e.next=10,cmd.PrebuildResultCmd.unitTest(1,t);case 10:return e.next=12,cmd.PrebuildTurnCmd.unitTest(1);case 12:return t=e.sent,e.next=15,cmd.PrebuildResultCmd.unitTest(1,t);case 15:return e.next=17,cmd.PrebuildTurnCmd.unitTest(2);case 17:return t=e.sent,e.next=20,cmd.PrebuildResultCmd.unitTest(2,t);case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"rankRoll",value:function(){var e=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("rankRoll"),e.next=3,cmd.RankRollTurnCmd.unitTest(1);case 3:return e.next=5,cmd.RankRollResultCmd.unitTest(1,[3,5]);case 5:return e.next=7,cmd.RankRollResultCmd.unitTest(2,[3,6],[2,1]);case 7:console.log("rankRoll end");case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"test2",value:function(){var e=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"test1",value:function(){var e=i(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=game.contavatarr.getPlayer(1),n=t.getStandTile().idx+9,e.next=4,game.map.movePlayerTo(t,t.getStandTile().idx+9);case 4:n%=constants.TileCount,t.enterTile(game.map.getTile(n));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"gameStart",value:function(){var e={players:ServerPlayerManager.getInstance().init(),tiles:ServerMap.getInstance().init(),card:ServerCardManager.getInstance().init()};return(new cmd.GameStartCmd).execute(e)}}]),t}();window.cmd=window.cmd||{},window.cmd.UnitTestCmd=o,cc._RF.pop()},{}],UseCardResultCmd:[function(e,t,n){"use strict";cc._RF.push(t,"11ee4ihkp9JBZL3TzYrM6Dj","UseCardResultCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=game.controler.getPlayer(t.playerId)).updateState(PlayerState.None),t.take){e.next=4;break}return e.abrupt("return");case 4:return r=game.map.getTile(t.tileIdx),i=game.cardMgr.getCard(t.cardType),n.useCard(t.cardType),e.next=9,i.displayUse(n,r);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"unitTest",value:function(e,t,n,r){var i={msgType:NetMsgType.S2CActionResult,playerId:e,type:ActionType.UseCard,take:t,cardType:n,tileIdx:r};game.netHandler.onSequenceMsg(i)}}]),t}();window.cmd=window.cmd||{},window.cmd.UseCardResultCmd=i,cc._RF.pop()},{}],UseCardTurnCmd:[function(e,t,n){"use strict";cc._RF.push(t,"5ed31K69Z5C07aUbFceg2+V","UseCardTurnCmd");var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cmd.BaseCommand),r(t,[{key:"execute",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=game.controler.getPlayer(t.playerId)).updateState(PlayerState.Card,CDTime.CardInquire+CDTime.CardSelect),n.isHero()){e.next=4;break}return e.abrupt("return");case 4:if(!this.gmTest()){e.next=6;break}return e.abrupt("return");case 6:return console.log(t.enabled),e.next=9,game.cardInquiryView.show(CardInquireType.Use);case 9:if(!(r=e.sent).take){e.next=13;break}return game.cardSelectView.show(CDTime.CardSelect+r.cd),e.abrupt("return");case 13:game.netHandler.useCard(!1);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"gmTest",value:function(){if(gm.passUseCard)return game.netHandler.useCard(!1),!0}}],[{key:"unitTest",value:function(e){var t={msgType:NetMsgType.S2CActionTurn,playerId:e,type:ActionType.UseCard};game.netHandler.onSequenceMsg(t)}}]),t}();window.cmd=window.cmd||{},window.cmd.UseCardTurnCmd=i,cc._RF.pop()},{}],WebBGRunner:[function(e,t,n){"use strict";cc._RF.push(t,"cb1aaESAgRAurPeb5SZYSEd","WebBGRunner");cc.Class({extends:cc.Component,properties:{scriptUrl:{default:"resources/bgWorker.txt"}},onLoad:function(){cc.sys.isBrowser&&(cc.game.on(cc.game.EVENT_HIDE,this.onGameHide,this),cc.game.on(cc.game.EVENT_SHOW,this.onGameShow,this))},onGameHide:function(){console.log("onGameHide"),null==this.bgWorker&&(this.bgWorker=new Worker(cc.url.raw(this.scriptUrl)),this.bgWorker.onmessage=function(e){cc.director.mainLoop()})},onGameShow:function(){console.log("onGameShow"),null!=this.bgWorker&&(this.bgWorker.terminate(),this.bgWorker=null)}}),cc._RF.pop()},{}],WinConditionTIpsView:[function(e,t,n){"use strict";cc._RF.push(t,"d41c6vaTHlH8quQJTOIpCC9","WinConditionTIpsView"),cc.Class({extends:cc.Component,onLoad:function(){this.hide()},show:function(){var e=this;return new Promise(function(t){e.node.active=!0;var n=e.node.y=cc.winSize.height/2+e.node.height,r=[];r.push(cc.moveTo(.3,e.node.x,0)),r.push(cc.delayTime(1)),r.push(cc.moveTo(.3,e.node.x,n)),r.push(cc.callFunc(t)),e.node.runAction(cc.sequence(r))})},hide:function(){this.node.active=!1}}),cc._RF.pop()},{}],app:[function(e,t,n){"use strict";cc._RF.push(t,"cb1e83EXL1Ja4D3EXmAl45I","app"),e("runtime"),window.game=e("Global").getInstance(),window.utils=e("utils"),window.displayUtils=e("DisplayUtils"),window.constants={MaxPlayerCount:4,GameOverCupCount:10,InitPlayerCoin:200,TileTypeCount:8,TileCount:40,BaseRent:20,MinRent:40,BuyCardCost:40,BuildBaseCost:20,IndustryMonopolyRentBonus:20,BuildDiscount:20,BuyCardDiscountCost:30,LuckRollBonus:5,SpeculatorCount:8},window.CDTime={CardInquire:10,DrawCard:10,OriginSelect:25,BuildConfirm:25,CardSelect:25,ActionRoll:10,Prebuild:35,RankRoll:15},window.TileType={Origin:0,Red:1,Orange:2,Yellow:3,Green:4,Blue:5,Pink:6,White:7,Gray:8},window.ActionType={BuyCard:"buy",UseCard:"use",Build:"build"},window.PlayerState={None:0,Roll:1,Build:2,Card:3,DrawCard:3,BuyCard:3,UseCard:3},window.RollType={Rank:"rank",Action:"action",Origin:"origin"},window.AchievementType={Collectivize:0,RegionalMonopoly:1,IndustryMonopoly:2,Speculator:3},window.Type2Color=[cc.color(0,0,0),cc.color(255,0,0),cc.color(255,197,45),cc.color(255,255,3),cc.color(92,255,45),cc.color(44,143,255),cc.color(255,142,198),cc.color(255,255,255),cc.color(197,197,197)],window.CardType={Action:1,Block:2,Cup:3,House:4,Remove:5,CupAndHouse:6,Seize:7,Coin20:8,Coin30:9,Coin50:10,Coin75:11,Coin100:12},window.Region={East:0,South:1,West:2,North:3},window.ButtonType={OK:1,Cancel:2},window.luckyCard={},e("BaseCard"),window.cmd={},e("BaseCommand"),window.NetMsgType={C2SRoll:"c2s_msg_roll",C2SSelectOrigin:"c2s_msg_select_origin",C2SAction:"c2s_msg_action",C2SPrebuild:"c2s_msg_prebuild",S2CGameStart:"s2c_msg_game_start",S2CGameOver:"s2c_msg_game_over",S2CRollTurn:"s2c_msg_roll_turn",S2CRollResult:"s2c_msg_roll_result",S2CPrebuildTurn:"s2c_msg_prebuild_turn",S2CPrebuildResult:"s2c_msg_prebuild_result",S2CSelectOriginTurn:"s2c_msg_select_origin_turn",S2CSelectOriginResult:"s2c_msg_select_origin_result",S2CActionTurn:"s2c_msg_action_turn",S2CActionResult:"s2c_msg_action_result",S2CAchievementChange:"s2c_msg_achievement_change"},window.spc=function(e){},window.cpc=function(e){},cc._RF.pop()},{BaseCard:"BaseCard",BaseCommand:"BaseCommand",DisplayUtils:"DisplayUtils",Global:"Global",runtime:"runtime",utils:"utils"}],chs:[function(e,t,n){"use strict";cc._RF.push(t,"ad35avHDBtP56pa6/i6s6jL","chs"),t.exports={prebuild_index:["\u4e00","\u4e8c"],prebuild_tips:"{0}\u8bf7\u5efa\u9020\u7b2c{1}\u6240\u623f\u5b50",origin_select_self:"\u8bf7\u9009\u62e9\u8d77\u59cb\u70b9",origin_select_others:"\u7b49\u5f85\u5bf9\u624b\u9009\u62e9",origin_select_tips:"\u5728\u56db\u4e2a\u9876\u70b9\u4efb\u9009\u4e00\u4e2a\u4f5c\u4e3a\u8d77\u59cb\u70b9",buy_card_void:"\u5f88\u9057\u61be\uff0c\u5df2\u7ecf\u6ca1\u6709\u673a\u4f1a\u5361\u53ef\u4ee5\u8d2d\u4e70",buy_card_title:"\u662f\u5426\u82b1{0}\u91d1\u5e01\u8d2d\u4e70\u4e00\u5f20\u673a\u4f1a\u5361\uff1f",buy_card_tips_insufficient:"\u60a8\u7684\u91d1\u5e01\u4e0d\u8db3",buy_card_button_ok:"\u8d2d\u4e70",buy_card_button_cancel:"\u4e0d\u4e70",use_card_title:"\u662f\u5426\u4f7f\u7528\u5361\u7247",use_card_button_ok:"\u4f7f\u7528",use_card_button_cancel:"\u4e0d\u7528",use_card_tips:"\u60a8\u6709{0}\u5f20\u673a\u4f1a\u5361",use_card_tips_insufficient:"\u60a8\u6ca1\u6709\u673a\u4f1a\u5361",draw_card_failed:"\u5f88\u9057\u61be\uff0c\u6ca1\u6709\u83b7\u5f97\u673a\u4f1a\u5361",draw_card_void:"\u5f88\u9057\u61be\uff0c\u5df2\u7ecf\u6ca1\u6709\u673a\u4f1a\u5361\u53ef\u4ee5\u62bd\u53d6",draw_card_tips:"\u5df2\u4f7f\u7528{0}\u5f20\u673a\u4f1a\u5361\uff0c\u82e5\u70b9\u6570<={1}x2+1\u70b9\uff0c\u5219\u53ef\u83b7\u5f97\u4e00\u5f20\u673a\u4f1a\u5361",build_confirm_tips:"\u662f\u5426\u6d88\u8017{0}\u91d1\u5e01\u5efa\u623f?",build_confirm_discount_tips:"\u884c\u4e1a\u5784\u65ad\u51cf\u5c11{0}\u4e2a\u91d1\u5e01",build_confirm_tips_owned:"\u5df2\u6709\u623f\u5c4b\uff0c\u65e0\u6cd5\u5efa\u9020",build_confirm_origin_tips:"\u8d77\u70b9\u65e0\u6cd5\u5efa\u9020",build_confirm_tips_insufficient:"\u9700\u8981\u6d88\u8017{0}\u91d1\u5e01\u5efa\u623f\uff0c\u60a8\u7684\u91d1\u5e01\u4e0d\u591f\u3002",av_speculator_item_tips:"\u5df2\u4f7f\u7528{0}\u5f20",av_region_item_tips:"\u5360\u9886{0}",achivement_names:["\u96c6\u56e2\u5316","\u533a\u57df\u5784\u65ad","\u884c\u4e1a\u5784\u65ad","\u6295\u673a\u8005"],card_names:["\u884c\u52a8\u5361","\u8def\u969c\u5361","\u91d1\u5e01\u5361","\u5956\u676f\u5361","\u623f\u5c4b\u5361","\u62c6\u9664\u5361","\u5956\u676f\u5efa\u7b51\u5361","\u5f3a\u5360\u5361"],color_name:["\u7ea2","\u6a59","\u9ec4","\u7eff","\u84dd","\u7c89","\u767d","\u7070"]},cc._RF.pop()},{}],onfire:[function(e,t,n){"use strict";cc._RF.push(t,"91a74xlHJBDGZbN3scZ4H+C","onfire");var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,n){"object"===(void 0===t?"undefined":r(t))&&t.exports?t.exports=n():e.onfire=n()}("undefined"!=typeof window?window:void 0,function(){var e={},t=0,n="string",i="function",o=Function.call.bind(Object.hasOwnProperty),a=Function.call.bind(Array.prototype.slice);function c(a,c,u,s){if((void 0===a?"undefined":r(a))!==n||(void 0===c?"undefined":r(c))!==i)throw new Error("args: "+n+", "+i);return o(e,a)||(e[a]={}),e[a][++t]=[c,u,s],[a,t]}function u(e,t){for(var n in e)o(e,n)&&t(n,e[n])}function s(t,n){o(e,t)&&u(e[t],function(r,i){i[0].apply(i[2],n),i[1]&&delete e[t][r]})}return{on:function(e,t,n){return c(e,t,0,n)},one:function(e,t,n){return c(e,t,1,n)},un:function(t){var a,c,s=!1,l=void 0===t?"undefined":r(t);return l===n?!!o(e,t)&&(delete e[t],!0):"object"===l?(a=t[0],c=t[1],!(!o(e,a)||!o(e[a],c)||(delete e[a][c],0))):l!==i||(u(e,function(n,r){u(r,function(r,i){i[0]===t&&(delete e[n][r],s=!0)})}),s)},fire:function(e){var t=a(arguments,1);setTimeout(function(){s(e,t)})},fireSync:function(e){s(e,a(arguments,1))},clear:function(){e={}}}}),cc._RF.pop()},{}],runtime:[function(e,t,n){"use strict";cc._RF.push(t,"71e7f8tukVPDLNceCpuZIf/","runtime");var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var n,i=Object.prototype,o=i.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag",l="object"===(void 0===t?"undefined":r(t)),p=e.regeneratorRuntime;if(p)l&&(t.exports=p);else{(p=e.regeneratorRuntime=l?t.exports:{}).wrap=C;var d="suspendedStart",f="suspendedYield",h="executing",m="completed",y={},g={};g[c]=function(){return this};var v=Object.getPrototypeOf,b=v&&v(v(A([])));b&&b!==i&&o.call(b,c)&&(g=b);var w=k.prototype=R.prototype=Object.create(g);_.prototype=w.constructor=k,k.constructor=_,k[s]=_.displayName="GeneratorFunction",p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(w),e},p.awrap=function(e){return{__await:e}},S(O.prototype),O.prototype[u]=function(){return this},p.AsyncIterator=O,p.async=function(e,t,n,r){var i=new O(C(e,t,n,r));return p.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},S(w),w[s]="Generator",w[c]=function(){return this},w.toString=function(){return"[object Generator]"},p.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},p.values=A,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(B),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return c.type="throw",c.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),s=o.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;B(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),y}}}function C(e,t,n,r){var i=t&&t.prototype instanceof R?t:R,o=Object.create(i.prototype),a=new M(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===m){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var c=P(a,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=T(e,t,n);if("normal"===u.type){if(r=n.done?m:f,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=m,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function T(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function R(){}function _(){}function k(){}function S(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function O(e){var t;this._invoke=function(n,i){function a(){return new Promise(function(t,a){(function t(n,i,a,c){var u=T(e[n],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"===(void 0===l?"undefined":r(l))&&o.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,a,c)},function(e){t("throw",e,a,c)}):Promise.resolve(l).then(function(e){s.value=e,a(s)},function(e){return t("throw",e,a,c)})}c(u.arg)})(n,i,t,a)})}return t=t?t.then(a,a):a()}}function P(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,P(e,t),"throw"===t.method))return y;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=T(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,y;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,y):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function A(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:n,done:!0}}}(function(){return this||"object"===("undefined"==typeof self?"undefined":r(self))&&self}()||Function("return this")()),cc._RF.pop()},{}],utils:[function(e,t,n){"use strict";cc._RF.push(t,"1d12eouFC9PK6+Rlq8le5Ua","utils");var r={dump:function(e,t){for(var n in cc.log("\n---------- utils.dump start ----------"),null!=t&&cc.log(t),e)cc.log("{0}:{1}".format(n,e[n]||""));cc.log("---------- end ----------\n")},simpleClone:function(e){var t={};return cc.js.addon(t,e),t},getUrlParams:function(){if(!cc.sys.isBrowser)return{};if(null==this.urlParams){this.urlParams={};var e=window.location.href.split("?");if(e.length>1){e=e[1].split("&");for(var t=0;t<e.length;++t){var n=e[t].split("=");this.urlParams[n[0]]=n[1]}}}return this.urlParams},randomInt:function(e,t){return Math.floor(e+Math.random()*(t-e+1))},random:function(e,t){return e+Math.random()*(t-e)},md5:function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,r,i,o,a;return i=2147483648&e,o=2147483648&t,a=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(r=1073741824&t)?2147483648^a^i^o:n|r?1073741824&a?3221225472^a^i^o:1073741824^a^i^o:a^i^o}function r(e,r,i,o,a,c,u){return n(t(e=n(e,n(n(function(e,t,n){return e&t|~e&n}(r,i,o),a),u)),c),r)}function i(e,r,i,o,a,c,u){return n(t(e=n(e,n(n(function(e,t,n){return e&n|t&~n}(r,i,o),a),u)),c),r)}function o(e,r,i,o,a,c,u){return n(t(e=n(e,n(n(function(e,t,n){return e^t^n}(r,i,o),a),u)),c),r)}function a(e,r,i,o,a,c,u){return n(t(e=n(e,n(n(function(e,t,n){return t^(e|~n)}(r,i,o),a),u)),c),r)}function c(e){var t="",n="",r=void 0;for(r=0;r<=3;r++)t+=(n="0"+(e>>>8*r&255).toString(16)).substr(n.length-2,2);return t}var u=Array(),s=void 0,l=void 0,p=void 0,d=void 0,f=void 0,h=void 0,m=void 0,y=void 0,g=void 0;for(u=function(e){for(var t=void 0,n=e.length,r=n+8,i=16*((r-r%64)/64+1),o=Array(i-1),a=0,c=0;c<n;)a=c%4*8,o[t=(c-c%4)/4]=o[t]|e.charCodeAt(c)<<a,c++;return a=c%4*8,o[t=(c-c%4)/4]=o[t]|128<<a,o[i-2]=n<<3,o[i-1]=n>>>29,o}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(e)),h=1732584193,m=4023233417,y=2562383102,g=271733878,s=0;s<u.length;s+=16)l=h,p=m,d=y,f=g,m=a(m=a(m=a(m=a(m=o(m=o(m=o(m=o(m=i(m=i(m=i(m=i(m=r(m=r(m=r(m=r(m,y=r(y,g=r(g,h=r(h,m,y,g,u[s+0],7,3614090360),m,y,u[s+1],12,3905402710),h,m,u[s+2],17,606105819),g,h,u[s+3],22,3250441966),y=r(y,g=r(g,h=r(h,m,y,g,u[s+4],7,4118548399),m,y,u[s+5],12,1200080426),h,m,u[s+6],17,2821735955),g,h,u[s+7],22,4249261313),y=r(y,g=r(g,h=r(h,m,y,g,u[s+8],7,1770035416),m,y,u[s+9],12,2336552879),h,m,u[s+10],17,4294925233),g,h,u[s+11],22,2304563134),y=r(y,g=r(g,h=r(h,m,y,g,u[s+12],7,1804603682),m,y,u[s+13],12,4254626195),h,m,u[s+14],17,2792965006),g,h,u[s+15],22,1236535329),y=i(y,g=i(g,h=i(h,m,y,g,u[s+1],5,4129170786),m,y,u[s+6],9,3225465664),h,m,u[s+11],14,643717713),g,h,u[s+0],20,3921069994),y=i(y,g=i(g,h=i(h,m,y,g,u[s+5],5,3593408605),m,y,u[s+10],9,38016083),h,m,u[s+15],14,3634488961),g,h,u[s+4],20,3889429448),y=i(y,g=i(g,h=i(h,m,y,g,u[s+9],5,568446438),m,y,u[s+14],9,3275163606),h,m,u[s+3],14,4107603335),g,h,u[s+8],20,1163531501),y=i(y,g=i(g,h=i(h,m,y,g,u[s+13],5,2850285829),m,y,u[s+2],9,4243563512),h,m,u[s+7],14,1735328473),g,h,u[s+12],20,2368359562),y=o(y,g=o(g,h=o(h,m,y,g,u[s+5],4,4294588738),m,y,u[s+8],11,2272392833),h,m,u[s+11],16,1839030562),g,h,u[s+14],23,4259657740),y=o(y,g=o(g,h=o(h,m,y,g,u[s+1],4,2763975236),m,y,u[s+4],11,1272893353),h,m,u[s+7],16,4139469664),g,h,u[s+10],23,3200236656),y=o(y,g=o(g,h=o(h,m,y,g,u[s+13],4,681279174),m,y,u[s+0],11,3936430074),h,m,u[s+3],16,3572445317),g,h,u[s+6],23,76029189),y=o(y,g=o(g,h=o(h,m,y,g,u[s+9],4,3654602809),m,y,u[s+12],11,3873151461),h,m,u[s+15],16,530742520),g,h,u[s+2],23,3299628645),y=a(y,g=a(g,h=a(h,m,y,g,u[s+0],6,4096336452),m,y,u[s+7],10,1126891415),h,m,u[s+14],15,2878612391),g,h,u[s+5],21,4237533241),y=a(y,g=a(g,h=a(h,m,y,g,u[s+12],6,1700485571),m,y,u[s+3],10,2399980690),h,m,u[s+10],15,4293915773),g,h,u[s+1],21,2240044497),y=a(y,g=a(g,h=a(h,m,y,g,u[s+8],6,1873313359),m,y,u[s+15],10,4264355552),h,m,u[s+6],15,2734768916),g,h,u[s+13],21,1309151649),y=a(y,g=a(g,h=a(h,m,y,g,u[s+4],6,4149444226),m,y,u[s+11],10,3174756917),h,m,u[s+2],15,718787259),g,h,u[s+9],21,3951481745),h=n(h,l),m=n(m,p),y=n(y,d),g=n(g,f);return(c(h)+c(m)+c(y)+c(g)).toLowerCase()},splitNumber:function(e){var t=e.toString(),n=t.charAt(0);"-"==n||"+"==n?t=t.substr(1):n="";var i=t.split(".");if(i.length>1)return i[0]=r.splitNumber(i[0]),n+i.join(".");for(i=[];t.length>3;)i.unshift(t.substr(t.length-3)),t=t.substr(0,t.length-3);return i.unshift(t),t=n+(t=i.join(","))},stringRepeat:function(e,t){for(var n=e;t>1;)--t,n+=e;return n},getNowTimeString:function(){return(new Date).toTimeString().split(" ")[0]}};String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"gm"),t)},String.prototype.format=function(e){var t=this;if(arguments.length<1)return t;var n=arguments;for(var r in n){var i=n[r];null!=i&&(t=t.replaceAll("\\{"+r+"\\}",i))}return t},Array.prototype.removeElement=function(e){var t=this.indexOf(e);if(-1!=t)return this.splice(t,1)},Array.prototype.insertElement=function(e,t){this.splice(e,-1,t)},t.exports=r,cc._RF.pop()},{}]},{},["app","FloatTips","GameViewManager","Global","LocalGameServer","ServerConstants","ServerGameController","Command","PrebuildCmd","RoomGameStartCmd","RoundActionCmd","SelectOriginCmd","ServerTemplateCmd","TestCmd","RollCmd","GameMaster","InfluenceHandler","Achievement","CollectivizeAchievement","IndustryMonopolyAchievement","RegionalMonopolyAchievement","ServerAchievementManager","SpeculatorAchievement","GameServerCard","GameServerCardManager","GameServerMap","GameServerTile","GameServerPlayer","GameServerPlayerManager","TestClientNetHandler","TestServerNetHandler","chs","FloatItem","GameController","ResourceMananger","TileSelector","AchievementManager","ActionCard","BaseCard","BlockCard","CardMananger","CardView","CoinCard","CupAndHouseCard","CupCard","HouseCard","RemoveCard","SeizeCard","AchievementChangeCmd","BaseCommand","GameOverCmd","GameStartCmd","PrebuildResultCmd","PrebuildTurnCmd","SelectOriginResultCmd","SelectOriginTurnCmd","UnitTestCmd","RoundActionResultCmd","RoundActionTurnCmd","BuildResultCmd","BuildTurnCmd","BuyCardResultCmd","BuyCardTurnCmd","UseCardResultCmd","UseCardTurnCmd","RollResultCmd","RollTurnCmd","ActionRollResultCmd","ActionRollTurnCmd","OriginRollResultCmd","OriginRollTurnCmd","RankRollResultCmd","RankRollTurnCmd","Map","PlayerAvatar","OriginTile","Tile","TileImageInfo","Player","AchievementTotalView","ActionRollView","BuildConfirmView","CardInquiryView","CardSelectView","CountdownHandler","DiceView","DrawCardView","GameOverView","OriginSelectView","PrepareBuildConfirmView","PrepareBuildView","RankDiceView","TileCardUseView","TipsView","UnbuildableTipsView","WinConditionTIpsView","AchievementView","PlayerInfoView","onfire","runtime","AGAudio","AGSlider","InitLoader","SequenceController","WebBGRunner","DisplayUtils","EasyCalls","BaseModalDlgComponent","ModalManager","utils"]);